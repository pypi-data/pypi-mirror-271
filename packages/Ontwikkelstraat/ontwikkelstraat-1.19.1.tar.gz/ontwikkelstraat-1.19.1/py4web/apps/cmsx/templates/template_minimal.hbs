<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Delen met Eddie</title>
        <!--        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">-->
        <link rel="stylesheet" href="{{URL 'static/mystyles.css'}}">
        <script src="{{URL 'static/js/bulma.js'}}"></script>
        <script defer src="https://use.fontawesome.com/releases/v5.15.2/js/all.js"></script>

        <!-- Load from unpkg -->

        <!-- _hs must go BEFORE hs w9y! -->
        <script type="text/hyperscript" src="{{URL 'static/js/commands._hs'}}"></script>
        <script type="text/hyperscript" src="{{URL 'static/js/behaviors._hs'}}"></script>
        <script src="{{URL 'static/js/_hyperscript_w9y-0.9.5-dev.min.js'}}"></script>
        <!--<script src="https://unpkg.com/hyperscript.org@0.9.1/dist/_hyperscript_w9y.min.js"></script>-->

        <!-- Load from unpkg -->
        <script src="https://unpkg.com/htmx.org@1.6.1"></script>

        <!-- htmx extend exposes internal HTMX code to JS:
         - htmx.vals (hx-vals)
         - htmx.vars (hx-vars)
         - htmx.expression_vars (= vals + vars)
        -->
        <script src="{{URL 'static/js/htmx_extend.js'}}"></script>

        <!-- Add custom JS functionality -->
        <script src="{{URL 'static/js/javascript_dependencies.js'}}"></script>

        <script>
            // htmx.logAll();
        </script>

    </head>
    <body
            id="edwh-messagebus"
            class="edwh-messagebus"
            hx-vars="GHOST_BASE: input('GHOST_BASE'), FRONT_END_BASE: input('FRONT_END_BASE')"
    >
        <input type="hidden" name="GHOST_BASE" value="/">
        <input type="hidden" name="FRONT_END_BASE" value="/fragmentx">

        <script>
            function input(selector) {
                return document.querySelector(`[name=${selector}]`).value;
            }
        </script>
        <script>
            <!-- IE check -->
            if (window.document.documentMode) {
                alert('Deze website werkt NIET in Internet Explorer, download een nieuwere browser.');
            }
        </script>
        <main>
            <!-- content injected by extending page -->
            [[include]]
        </main>
        <!-- end of HTML inserted by extending template -->


        <template id="loading-error">
            <article class="message is-danger" style="max-width: 1000px; margin: auto;">
                <div class="message-body">
                    Er ging wat mis bij het laden van dit element.
                    Probeer het later opnieuw.
                </div>
            </article>
        </template>
    </body>
    <script src="{{URL 'static/js/browser-report.js'}}"></script>
    <script>
        // PREFIX ALLES MET /fragmentx (of een andere url)
        document.body.addEventListener("htmx:configRequest", (event) => {
            const base = input('FRONT_END_BASE');
            if (!event.detail.path.startsWith('https://')) {
                event.detail.path = `${base}/${event.detail.path}`;
            }
        });
    </script>

    <script type="text/hyperscript">
    on htmx:responseError
      render #loading-error then put it into event.detail.target

    </script>
</html>
