<div class="edwh-columns">
    {{#if settings.paginate}}
        <div class="edwh-column-full">
            {{paginate tiles}}
        </div>
    {{/if}}
    {{#unless tiles.found}}
        <div class="column has-text-centered">
            <div class="title">Sorry, we konden niets vinden!</div>
            <div class="subtitle">Probeer de zoekopdracht of gekozen filters aan te passen.</div>
        </div>
    {{/unless}}
    {{#each tiles.found}}
        <div class="edwh-column-card">
            <article class="edwh-card">
                <a href="{{item_uri_template id}}" target="_blank" title="{{name}}">
                    <div class="edwh-card-image">
                        <figure class="edwh-placeholder">
                            {{#if thumbnail.uri}}
                                <img src="{{thumbnail.uri}}" alt="Placeholder image">
                            {{else}}
                                <img src="https://f003.backblazeb2.com/file/nl-meteddie-delen-permalinkable/image_placeholder.jpg"
                                     alt="Placeholder image">
                            {{/if}}
                        </figure>
                        <div class="edwh-stickers">
                            {{#stickers}}
                                {{#if svg}}
                                    <div style="cursor: pointer;" title="{{sticker_tag.name}}"
                                         class="is-pulled-right"
                                         _="install Sticker(id: '{{sticker_tag.id}}')"
                                    >
                                        <!-- object kan geen onclick, dus vandaar een div + a er om heen -->
                                        <div title="{{sticker_tag.name}}" style="display: block; z-index: 1;">
                                            <object id="svg-{{id}}" data="{{uri}}"
                                                    class="edwh-sticker"
                                                    style="z-index: -1; pointer-events: none;"
                                                    type="image/svg+xml">
                                            </object>
                                        </div>
                                    </div>
                                {{else}}
                                    <img
                                            style="cursor: pointer;"
                                            _="install Sticker(id:'{{sticker_tag.id}}')"

                                            id="{{id}}"
                                            src="{{uri}}"
                                            class="edwh-sticker"
                                            alt="{{sticker_tag.name}}" title="{{sticker_tag.name}}">
                                {{/if}}
                            {{/stickers}}
                        </div>
                    </div>
                </a>
                <div class="edwh-card-content">
                    <div class="edwh-card-heading">
                        <a href="{{item_uri_template id}}" target="_blank">
                            <p class="edwh-card-title">{{name}}</p></a>
                        <p class="edwh-card-subtitle">
                            <span title="Auteur">
                                {{author.name}}
                            </span>
                            Â·
                            <span title="Leestijd">
                                {{#if timeToRead}}
                                    {{timeToRead}} min.
                                {{else}}
                                                   < 1 min.
                                {{/if}}
                            </span>
                        </p>
                    </div>

                    <div class="edwh-card-teaser">
                        {{teaser}}
                    </div>
                </div>
                <footer>
                    <form class="edwh-card-footer"
                        {{#if ../anonymous}}
                          _="install Auth"
                        {{else}}
                          hx-trigger="ew:submit throttle:500ms"
                          hx-post="like"
                          hx-target="find .edwh-like-feedback"
                          _="install LikeButton(item_id: '{{id}}')"
                        {{/if}}
                    >
                        <input type="hidden" value="{{id}}" name="subject" />
                        <input type="hidden" name="toggle" />
                        <input type="hidden" value="THUMBS" name="action" />
                        <a data-gid="{{id}}"
                            {{#if (has_my_thumb this)}}
                           class="edwh-like-btn thumbs-UP"
                            {{else}}
                           class="edwh-like-btn"
                            {{/if}}
                           data-action="THUMBS"
                        >
                            <svg viewBox="0 0 17.806 15.713"
                                 class="edwh-icon">
                                <path
                                        d="M16.383 1.423a4.784 4.784 0 00-6.81 0l-.67.67-.67-.67a4.815 4.815 0 00-6.81 6.81l7.48 7.48 7.48-7.48a4.784 4.784 0 000-6.81"
                                        fill="#25303D" fill-rule="evenodd" data-name="Symbol 66"></path>
                            </svg>
                        </a>
                        <div class="has-text-weight-bold">
                            <span class="edwh-like-count" data-gid="{{id}}">
                                {{thumb_count this}}
                            </span>
                            <span class="edwh-like-feedback"></span>
                        </div>
                    </form>
                </footer>
            </article>
        </div>
    {{/each}}
    {{#if settings.paginate}}
        <div class="edwh-column-full">
           {{paginate tiles}}
        </div>
    {{/if}}
</div>
