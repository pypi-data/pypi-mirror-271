[build-system]
requires = ["setuptools>=61", "wheel>=0.37.1", "scikit-build", "cmake", "ninja", "setuptools_scm[toml]<=7.0"]

[tool.cibuildwheel]
# Only build on CPython 3.10
build = "cp310-*"
skip = "pp*"

[tool.cibuildwheel.linux]
manylinux-x86_64-image = "manylinux_2_28"
manylinux-aarch64-image = "manylinux_2_28"
before-all = [
    "dnf -y --setopt=tsflags=nodocs update",
    "dnf -y --setopt=tsflags=nodocs install libusbx-devel"
]

[[tool.cibuildwheel.overrides]]
select = "*-musllinux*"
before-all = "apk add libusb-dev"
