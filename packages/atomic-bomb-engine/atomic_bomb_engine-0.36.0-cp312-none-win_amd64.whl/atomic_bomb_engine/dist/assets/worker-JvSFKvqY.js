(function(){"use strict";self.addEventListener("message",function(s){const{action:n,baseURL:a,nanoid:r}=s.data;if(n==="start"){const e=new WebSocket(`ws://${a}/ws/${r}`);let o;const c=()=>{o&&clearInterval(o),o=setInterval(()=>{e.readyState===WebSocket.OPEN&&e.send("PING")},3e3)};e.onopen=()=>{console.log("WebSocket connection opened in worker"),c(),postMessage({type:"open"})},e.onmessage=t=>{postMessage({type:"message",data:t.data})},e.onerror=t=>{console.error("WebSocket error in worker:",t),postMessage({type:"error",error:t.toString()})},e.onclose=()=>{clearInterval(o),console.log("WebSocket connection closed in worker"),postMessage({type:"close"})},self.addEventListener("message",function(t){t.data.action==="close"&&e.close()})}})})();
