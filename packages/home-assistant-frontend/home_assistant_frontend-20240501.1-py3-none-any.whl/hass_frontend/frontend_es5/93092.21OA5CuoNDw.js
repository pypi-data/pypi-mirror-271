/*! For license information please see 93092.21OA5CuoNDw.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[93092],{11753:function(t,e,r){r.d(e,{A:function(){return i}});r(27934),r(86245),r(26777),r(3359),r(73842);var n=function(t){var e=parseFloat(t);if(isNaN(e))throw new Error("".concat(t," is not a number"));return e};function i(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:n(t.substr(0,t.length-1))};var e=t.replace(":","x").split("x");return 0===e.length?null:1===e.length?{w:n(e[0]),h:1}:{w:n(e[0]),h:n(e[1])}}catch(r){}return null}},62665:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){i=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),s=new M(n||[]);return a(o,"_invoke",{value:H(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var v="suspendedStart",y="suspendedYield",p="executing",m="completed",g={};function _(){}function b(){}function w(){}var k={};h(k,u,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(N([])));x&&x!==r&&o.call(x,u)&&(k=x);var L=w.prototype=_.prototype=Object.create(k);function A(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,a,s,u){var c=d(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==n(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}})}function H(e,r,n){var i=v;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===v)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?m:y,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=m,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=d(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=w,a(L,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,h(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},A(O.prototype),h(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(f(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(L),h(L,l,"Generator"),h(L,u,(function(){return this})),h(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function o(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,i)}r.a(t,function(){var t,n=(t=i().mark((function t(n,o){var a,s,u,c,l,h,f,d,v,y,p,m,g,_,b,w,k,E,x,L,A,O,H,S;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.d(e,{IQ:function(){return b},Jo:function(){return g},Mm:function(){return H},qc:function(){return S}}),a=r(61780),s=r(66123),u=r(89231),c=r(36683),r(77052),r(69466),r(4187),r(53501),r(21950),r(53156),r(36724),r(71936),r(14460),r(62859),r(43859),r(1158),r(68113),r(57733),r(34517),r(56262),r(66274),r(85038),r(85767),r(84531),r(98168),r(22836),r(15445),r(24483),r(13478),r(46355),r(14612),r(53691),r(48455),r(34290),r(8339),l=r(47038),h=r(89936),f=r(82931),!(d=n([h])).then){t.next=79;break}return t.next=75,d;case 75:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=80;break;case 79:t.t0=d;case 80:h=t.t0[0],v=["climate","humidifier","water_heater"],y=["climate","humidifier","input_datetime","thermostat","water_heater","person","device_tracker"],p=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],m=function(t,e){return!t.states[e]||y.includes((0,l.m)(e))},g=function(t,e,r,n,i){var o={type:"history/stream",entity_ids:i,start_time:r.toISOString(),end_time:n.toISOString(),minimal_response:!0,no_attributes:!i.some((function(e){return m(t,e)}))},a=new _(t);return t.connection.subscribeMessage((function(t){return e(a.processMessage(t))}),o)},_=function(){return(0,c.A)((function t(e,r){(0,u.A)(this,t),this.hass=void 0,this.hoursToShow=void 0,this.combinedHistory=void 0,this.hass=e,this.hoursToShow=r,this.combinedHistory={}}),[{key:"processMessage",value:function(t){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=t.states,this.combinedHistory;if(!Object.keys(t.states).length)return this.combinedHistory;for(var e=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,r={},n=0,i=Object.keys(this.combinedHistory);n<i.length;n++)r[i[n]]=[];for(var o=0,a=Object.keys(t.states);o<a.length;o++)r[a[o]]=[];for(var s=0,u=Object.keys(r);s<u.length;s++){var c=u[s];if(c in this.combinedHistory&&c in t.states){var l=this.combinedHistory[c],h=l[l.length-1];r[c]=l.concat(t.states[c]),t.states[c][0].lu<h.lu&&(r[c]=r[c].sort((function(t,e){return t.lu-e.lu})))}else c in this.combinedHistory?r[c]=this.combinedHistory[c]:r[c]=t.states[c];if(e&&c in this.combinedHistory){var f=r[c].filter((function(t){return t.lu<e}));if(!f.length)continue;if(r[c]=r[c].filter((function(t){return t.lu>=e})),r[c].length&&r[c][0].lu===e)continue;var d=f[f.length-1];d.lu=e,r[c].unshift(d)}}return this.combinedHistory=r,this.combinedHistory}}])}(),b=function(t,e,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6?arguments[6]:void 0,s={type:"history/stream",entity_ids:n,start_time:new Date((new Date).getTime()-3600*r*1e3).toISOString(),minimal_response:i,significant_changes_only:o,no_attributes:null!=a?a:!n.some((function(e){return m(t,e)}))},u=new _(t,r);return t.connection.subscribeMessage((function(t){return e(u.processMessage(t))}),s)},w=function(t,e){return t.state===e.state&&(!t.attributes||!e.attributes||p.every((function(r){return t.attributes[r]===e.attributes[r]})))},k=function(t,e,r,n,i,o,a){var u,c=[],l=o[0],d=(0,s.A)(o);try{for(d.s();!(u=d.n()).done;){var v=u.value;if(!(c.length>0&&v.s===c[c.length-1].state)){var y={};null!=a&&a.attributes.device_class&&(y.device_class=null==a?void 0:a.attributes.device_class),c.push({state_localize:(0,h.computeStateDisplayFromEntityAttributes)(t,e,r,n[i],i,Object.assign(Object.assign({},v.a||l.a),y),v.s),state:v.s,last_changed:1e3*(v.lc?v.lc:v.lu)})}}}catch(p){d.e(p)}finally{d.f()}return{name:(0,f._)(i,(null==a?void 0:a.attributes)||l.a),entity_id:i,data:c}},E=function(t,e,r,n){var i=[];return Object.keys(r).forEach((function(t){var e,o=r[t],a=o[0],u=(0,l.m)(t),c=[],h=(0,s.A)(o);try{for(h.s();!(e=h.n()).done;){var d=e.value,y=void 0;if(v.includes(u)){y={state:d.s,last_changed:1e3*d.lu,attributes:{}};for(var m=0,g=p;m<g.length;m++){var _=g[m];_ in d.a&&(y.attributes[_]=d.a[_])}}else y={state:d.s,last_changed:1e3*(d.lc?d.lc:d.lu),attributes:{}};c.length>1&&w(y,c[c.length-1])&&w(y,c[c.length-2])||c.push(y)}}catch(k){h.e(k)}finally{h.f()}var b=t in n?n[t].attributes:"friendly_name"in a.a?a.a:void 0;i.push({domain:u,name:(0,f._)(t,b||{}),entity_id:t,states:c})})),{unit:t,device_class:e,identifier:Object.keys(r).join(""),data:i}},x=["counter","input_number","number"],L=function(t){return x.includes(t)},A=function(t){return"unit_of_measurement"in t||"state_class"in t},O=function(t,e){return null!=t.attributes.device_class&&e.includes(t.attributes.device_class)},H=function(t,e,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u={},c=[],h={};return new Set([].concat((0,a.A)(r),(0,a.A)(Object.keys(e)))).forEach((function(r){r in e?h[r]=e[r]:t.states[r]&&(h[r]=[{s:t.states[r].state,a:t.states[r].attributes,lu:new Date(t.states[r].last_updated).getTime()/1e3}])})),h?(Object.keys(h).forEach((function(e){var r,f=h[e];if(0!==f.length){var d,v=(0,l.m)(e),y=e in t.states?t.states[e]:void 0,p=y||L(v)?void 0:f.find((function(t){return t.a&&A(t.a)}));d=s||L(v)||null!=y&&A(y.attributes)||null!=y&&"sensor"===v&&O(y,i)||null!=p?(null==y?void 0:y.attributes.unit_of_measurement)||(null==p?void 0:p.a.unit_of_measurement)||" ":{zone:n("ui.dialogs.more_info_control.zone.graph_unit"),climate:t.config.unit_system.temperature,humidifier:"%",water_heater:t.config.unit_system.temperature}[v];var m={climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[v]||(null===(r=(null==y?void 0:y.attributes)||(null==p?void 0:p.a))||void 0===r?void 0:r.device_class),g=S(d,m,o);if(d)if(g&&g in u&&e in u[g]){var _;(_=u[g][e]).push.apply(_,(0,a.A)(f))}else g&&(g in u||(u[g]={}),u[g][e]=f);else c.push(k(n,t.locale,t.config,t.entities,e,f,y))}})),{line:Object.keys(u).map((function(e){var r=e.split("_"),n=r[0],i=r[1]||void 0;return E(n,i,u[e],t.states)})),timeline:c}):{line:[],timeline:[]}},S=function(t,e,r){return r?"".concat(t,"_").concat(e||""):t},o(),t.next=105;break;case 102:t.prev=102,t.t2=t.catch(0),o(t.t2);case 105:case"end":return t.stop()}}),t,null,[[0,102]])})),function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function s(t){o(a,n,i,s,u,"next",t)}function u(t){o(a,n,i,s,u,"throw",t)}s(void 0)}))});return function(t,e){return n.apply(this,arguments)}}())},24900:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){i=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),s=new M(n||[]);return a(o,"_invoke",{value:H(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var v="suspendedStart",y="suspendedYield",p="executing",m="completed",g={};function _(){}function b(){}function w(){}var k={};h(k,u,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(N([])));x&&x!==r&&o.call(x,u)&&(k=x);var L=w.prototype=_.prototype=Object.create(k);function A(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,a,s,u){var c=d(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==n(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}})}function H(e,r,n){var i=v;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===v)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?m:y,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=m,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=d(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=w,a(L,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,h(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},A(O.prototype),h(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(f(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(L),h(L,l,"Generator"),h(L,u,(function(){return this})),h(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function o(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,i)}r.a(t,function(){var t,n=(t=i().mark((function t(n,o){var a,s,u,c,l,h,f,d,v,y,p,m,g,_,b,w,k,E,x,L,A,O,H,S,j,P,M,N,T,F,G,I,D;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.r(e),r.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return I},DEFAULT_ZOOM:function(){return D}}),a=r(66123),s=r(61780),u=r(6238),c=r(94881),l=r(1781),h=r(36683),f=r(89231),d=r(29864),v=r(83647),y=r(8364),p=r(76504),m=r(80792),r(27934),r(77052),r(4187),r(53501),r(21950),r(36724),r(71936),r(848),r(650),r(86150),r(1158),r(68113),r(84368),r(55888),r(34517),r(56262),r(66274),r(85767),r(98168),r(8339),g=r(40924),_=r(196),b=r(45081),w=r(76502),k=r(6699),E=r(47038),x=r(82931),L=r(61314),A=r(11753),r(54373),r(12261),r(12731),O=r(76474),H=r(62665),S=r(15821),j=r(3433),P=r(67990),!(M=n([O,H])).then){t.next=80;break}return t.next=76,M;case 76:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=81;break;case 80:t.t0=M;case 81:N=t.t0,O=N[0],H=N[1],I=0,D=14,(0,y.A)([(0,_.EM)("hui-map-card")],(function(t,e){var n,i=function(e){function r(){var e;(0,f.A)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=(0,d.A)(this,r,[].concat(i)),t(e),e}return(0,v.A)(r,e),(0,h.A)(r)}(e);return{F:i,d:[{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.MZ)({type:Boolean,reflect:!0})],key:"isPanel",value:function(){return!1}},{kind:"field",decorators:[(0,_.wk)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,_.P)("ha-map")],key:"_map",value:void 0},{kind:"field",key:"_configEntities",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_mapEntities",value:function(){return[]}},{kind:"field",key:"_colorDict",value:function(){return{}}},{kind:"field",key:"_colorIndex",value:function(){return 0}},{kind:"field",decorators:[(0,_.wk)()],key:"_error",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"setConfig",value:function(t){var e;if(!t)throw new Error("Error in card configuration.");if(!(null!==(e=t.entities)&&void 0!==e&&e.length||t.geo_location_sources))throw new Error("Either entities or geo_location_sources must be specified");if(t.entities&&!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(t.geo_location_sources&&!Array.isArray(t.geo_location_sources))throw new Error("Parameter geo_location_sources needs to be an array");this._config=t,this._configEntities=t.entities?(0,P.L)(t.entities):[],this._mapEntities=this._getMapEntities()}},{kind:"method",key:"getCardSize",value:function(){var t;if(null===(t=this._config)||void 0===t||!t.aspect_ratio)return 7;var e=(0,A.A)(this._config.aspect_ratio),r=e&&e.w>0&&e.h>0?"".concat((100*e.h/e.w).toFixed(2)):"100";return 1+Math.floor(Number(r)/25)||3}},{kind:"method",static:!0,key:"getConfigElement",value:(n=(0,l.A)((0,c.A)().mark((function t(){return(0,c.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([r.e(27311),r.e(88201),r.e(61606),r.e(23006),r.e(38696),r.e(32839),r.e(37160),r.e(83579)]).then(r.bind(r,83579));case 2:return t.abrupt("return",document.createElement("hui-map-card-editor"));case 3:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(t,e,r){return{type:"map",entities:(0,j.B)(t,2,e,r,["device_tracker"]),theme_mode:"auto"}}},{kind:"method",key:"render",value:function(){var t;if(!this._config)return g.s6;if(this._error)return(0,g.qy)(T||(T=(0,u.A)(['<ha-alert alert-type="error"> ',": "," (",") </ha-alert>"])),this.hass.localize("ui.components.map.error"),this._error.message,this._error.code);var e=!(!this._config.dark_mode&&"dark"!==this._config.theme_mode)||"light"!==this._config.theme_mode&&this.hass.themes.darkMode,r=this._config.theme_mode||(this._config.dark_mode?"dark":"auto");return(0,g.qy)(F||(F=(0,u.A)([' <ha-card id="card" .header="','"> <div id="root"> <ha-map .hass="','" .entities="','" .zoom="','" .paths="','" .autoFit="','" .fitZones="','" .themeMode="','" interactiveZones renderPassive></ha-map> <ha-icon-button .label="','" .path="','" style="','" @click="','" tabindex="0"></ha-icon-button> </div> </ha-card> '])),this._config.title,this.hass,this._mapEntities,null!==(t=this._config.default_zoom)&&void 0!==t?t:D,this._getHistoryPaths(this._config,this._stateHistory),this._config.auto_fit||!1,this._config.fit_zones,r,this.hass.localize("ui.panel.lovelace.cards.map.reset_focus"),"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M19,19H15V21H19A2,2 0 0,0 21,19V15H19M19,3H15V5H19V9H21V5A2,2 0 0,0 19,3M5,5H9V3H5A2,2 0 0,0 3,5V9H5M5,15H3V19A2,2 0 0,0 5,21H9V19H5V15Z",e?"color:#ffffff":"color:#000000",this._fitMap)}},{kind:"method",key:"shouldUpdate",value:function(t){var e,r;if(!t.has("hass")||t.size>1)return!0;var n=t.get("hass");return!n||!this._configEntities||n.themes.darkMode!==this.hass.themes.darkMode||!!t.has("_stateHistory")||!(null===(e=this._config)||void 0===e||!e.geo_location_sources||n.states===this.hass.states)||(null!==(r=this._config)&&void 0!==r&&r.entities?(0,S.pY)(this,t):(0,S.xP)(this,t))}},{kind:"method",key:"willUpdate",value:function(t){var e,r;(0,p.A)((0,m.A)(i.prototype),"willUpdate",this).call(this,t),t.has("hass")&&null!==(e=this._config)&&void 0!==e&&e.geo_location_sources&&!(0,L.b)(this._getSourceEntities(null===(r=t.get("hass"))||void 0===r?void 0:r.states),this._getSourceEntities(this.hass.states))&&(this._mapEntities=this._getMapEntities())}},{kind:"method",key:"connectedCallback",value:function(){var t;(0,p.A)((0,m.A)(i.prototype),"connectedCallback",this).call(this),this.hasUpdated&&null!==(t=this._configEntities)&&void 0!==t&&t.length&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,p.A)((0,m.A)(i.prototype),"disconnectedCallback",this).call(this),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:function(){var t,e,r,n=this;(0,k.x)(this.hass,"history")&&!this._subscribed&&(null!==(t=null===(e=this._config)||void 0===e?void 0:e.hours_to_show)&&void 0!==t?t:I)&&(this._subscribed=(0,H.IQ)(this.hass,(function(t){n._subscribed&&(n._stateHistory=t)}),null!==(r=this._config.hours_to_show)&&void 0!==r?r:I,(this._configEntities||[]).map((function(t){return t.entity})),!1,!1,!1).catch((function(t){n._subscribed=void 0,n._error=t})))}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._subscribed&&(this._subscribed.then((function(t){return null==t?void 0:t()})),this._subscribed=void 0)}},{kind:"method",key:"updated",value:function(t){var e;null!==(e=this._configEntities)&&void 0!==e&&e.length?this._subscribed&&!t.has("_config")||(this._unsubscribeHistory(),this._subscribeHistory()):this._unsubscribeHistory(),t.has("_config")&&this._computePadding()}},{kind:"method",key:"_computePadding",value:function(){var t=this.shadowRoot.getElementById("root");if(this._config&&!this.isPanel&&t)if(this._config.aspect_ratio){t.style.height="auto";var e=(0,A.A)(this._config.aspect_ratio);t.style.paddingBottom=e&&e.w>0&&e.h>0?"".concat((100*e.h/e.w).toFixed(2),"%"):t.style.paddingBottom="100%"}else t.style.paddingBottom="100%"}},{kind:"method",key:"_fitMap",value:function(){var t;null===(t=this._map)||void 0===t||t.fitMap()}},{kind:"method",key:"_getColor",value:function(t){var e=this._colorDict[t];return e||(e=(0,w.Vy)(this._colorIndex),this._colorIndex++,this._colorDict[t]=e,e)}},{kind:"method",key:"_getSourceEntities",value:function(t){var e;if(!t||null===(e=this._config)||void 0===e||!e.geo_location_sources)return[];for(var r=[],n=this._config.geo_location_sources.includes("all"),i=0,o=Object.values(t);i<o.length;i++){var a=o[i];"geo_location"===(0,E.m)(a.entity_id)&&(n||this._config.geo_location_sources.includes(a.attributes.source))&&r.push(a.entity_id)}return r}},{kind:"method",key:"_getMapEntities",value:function(){var t,e=this;return[].concat((0,s.A)((this._configEntities||[]).map((function(t){return{entity_id:t.entity,color:e._getColor(t.entity),label_mode:t.label_mode,focus:t.focus,name:t.name}}))),(0,s.A)(this._getSourceEntities(null===(t=this.hass)||void 0===t?void 0:t.states).map((function(t){return{entity_id:t,color:e._getColor(t)}}))))}},{kind:"field",key:"_getHistoryPaths",value:function(){var t=this;return(0,b.A)((function(e,r){var n;if(r&&(null!==(n=e.hours_to_show)&&void 0!==n?n:I)){for(var i=[],o=function(){var n,o,c,l=u[s];if("zone"===(0,E.m)(l))return 0;var h=r[l];if(null==h||!h.length)return 0;var f,d=[],v=(0,a.A)(h);try{for(v.s();!(f=v.n()).done;){var y=f.value,p=y.a.latitude,m=y.a.longitude;if(p&&m){var g={};g.point=[p,m],g.timestamp=new Date(1e3*y.lu),d.push(g)}}}catch(w){v.e(w)}finally{v.f()}var _=null===(n=t._configEntities)||void 0===n?void 0:n.find((function(t){return t.entity===l})),b=null!==(o=null==_?void 0:_.name)&&void 0!==o?o:l in t.hass.states?(0,x.u)(t.hass.states[l]):l;i.push({points:d,name:b,fullDatetime:(null!==(c=e.hours_to_show)&&void 0!==c?c:I)>144,color:t._getColor(l),gradualOpacity:.8})},s=0,u=Object.keys(r);s<u.length;s++)o();return i}}))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,g.AH)(G||(G=(0,u.A)(["ha-card{overflow:hidden;width:100%;height:100%;display:flex;flex-direction:column}ha-map{z-index:0;border:none;position:absolute;top:0;left:0;width:100%;height:100%;background:inherit}ha-icon-button{position:absolute;top:75px;left:3px;outline:0}#root{position:relative;height:100%}"])))}}]}}),g.WF),o(),t.next=94;break;case 91:t.prev=91,t.t2=t.catch(0),o(t.t2);case 94:case"end":return t.stop()}}),t,null,[[0,91]])})),function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function s(t){o(a,n,i,s,u,"next",t)}function u(t){o(a,n,i,s,u,"throw",t)}s(void 0)}))});return function(t,e){return n.apply(this,arguments)}}())},86150:function(t,e,r){var n=r(87568),i=r(82374),o=r(94905),a=r(8242),s=r(69015),u=r(32565),c=RangeError,l=String,h=Math.floor,f=i(s),d=i("".slice),v=i(1..toFixed),y=function(t,e,r){return 0===e?r:e%2==1?y(t,e-1,r*t):y(t*t,e/2,r)},p=function(t,e,r){for(var n=-1,i=r;++n<6;)i+=e*t[n],t[n]=i%1e7,i=h(i/1e7)},m=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=h(n/e),n=n%e*1e7},g=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=l(t[e]);r=""===r?n:r+f("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:u((function(){return"0.000"!==v(8e-5,3)||"1"!==v(.9,0)||"1.25"!==v(1.255,2)||"1000000000000000128"!==v(0xde0b6b3a7640080,0)}))||!u((function(){v({})}))},{toFixed:function(t){var e,r,n,i,s=a(this),u=o(t),h=[0,0,0,0,0,0],v="",_="0";if(u<0||u>20)throw new c("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(v="-",s=-s),s>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(s*y(2,69,1))-69)<0?s*y(2,-e,1):s/y(2,e,1),r*=4503599627370496,(e=52-e)>0){for(p(h,0,r),n=u;n>=7;)p(h,1e7,0),n-=7;for(p(h,y(10,n,1),0),n=e-1;n>=23;)m(h,1<<23),n-=23;m(h,1<<n),p(h,1,1),m(h,2),_=g(h)}else p(h,0,r),p(h,1<<-e,0),_=g(h)+f("0",u);return _=u>0?v+((i=_.length)<=u?"0."+f("0",u-i)+_:d(_,0,i-u)+"."+d(_,i-u)):v+_}})},86174:function(t,e,r){function n(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}r.d(e,{w:function(){return n}})},51561:function(t,e,r){r.d(e,{r:function(){return i}});var n=r(93352);function i(t,e){return+(0,n.o)(t)==+(0,n.o)(e)}},79581:function(t,e,r){r.d(e,{c:function(){return a}});var n=r(86174);function i(t){return(0,n.w)(t,Date.now())}var o=r(51561);function a(t){return(0,o.r)(t,i(t))}}}]);
//# sourceMappingURL=93092.21OA5CuoNDw.js.map