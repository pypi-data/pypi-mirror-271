import{p as X,n as Z,f as t,d as K,r as H,ak as M,a1 as ee,k as te,I as ie,l as x,c as a,h as d,w as i,e as f,j as c,al as T,u as y,g as h,m as C,t as m,E as F,F as I,i as R,a7 as N,M as P,am as ae,s as S,b as A,an as oe,N as le,G as ne}from"./index-43311bc3.js";import{_ as q,L as W,C as se}from"./Container-9a0c901a.js";import{M as U,g as j,b as re}from"./VBadge-fcbfaeb4.js";import{B as E}from"./Button-8f8a6597.js";import{e as me,a as ue}from"./contextmenu-7f33cf6e.js";import{m as de,u as pe,r as J,b as $,V as B,q as ce,a as fe}from"./forwardRefs-651c2bd6.js";import{b as Y,c as ye,V as O}from"./VMenu-7c64b634.js";import{a as ge,V as be}from"./VCardText-bdb89c1f.js";import{a as w,V as G,b as he}from"./VCard-6b86821e.js";import{V as ve}from"./VTooltip-6463f4cd.js";import{b as ke,c as _e}from"./layout-679c2edc.js";import{V as Ce}from"./VDialog-b13a6f94.js";import{V as Ve}from"./VInput-54c6b2cd.js";import{V as $e}from"./VToolbar-b1ca2657.js";const we=X({...de(),...ke()},"VLayout"),Le=Z()({name:"VLayout",props:we(),setup(k,r){let{slots:p}=r;const{layoutClasses:_,layoutStyles:V,getLayoutItem:s,items:u,layoutRef:g}=_e(k);return pe(()=>{var o;return t("div",{ref:g,class:[_.value,k.class],style:[V.value,k.style]},[(o=p.default)==null?void 0:o.call(p)])}),{getLayoutItem:s,items:u}}}),Te={key:0,xs5:"","pa-5":"",style:{height:"100%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center"}},Ie={key:0},Re={key:1},Be={style:{"padding-bottom":"10px"}},Pe=["onClick"],De={style:{color:"primary"}},Ae={style:{display:"flex","margin-left":"14px","padding-bottom":"10px"}},ze=["innerHTML"],He={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},et=K({__name:"InfoHeader",props:{item:{}},setup(k){const r=k,p=H(!1),_=H(),{mobile:V}=M(),s=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,u=ee();te(),ie(()=>r.item,async e=>{e&&(_.value=j(r.item,N.FANART)||j(r.item,N.THUMB))},{immediate:!0});const g=function(e){u.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},o=function(e){u.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},D=function(){var l;if(S.prevScrollPos){u.go(-1);return}const e=((l=u.currentRoute.value.name)==null?void 0:l.toString())||"";for(const b of["artist","album","track","playlist","radio"])if(e.includes(b)){u.push({name:`${b}s`});return}u.push({name:"home"})},L=x(()=>{let e="";return r.item?(r.item.metadata&&r.item.metadata.description?e=r.item.metadata.description:r.item.metadata&&r.item.metadata.copyright?e=r.item.metadata.copyright:"artists"in r.item&&r.item.artists.forEach(function(l){"metadata"in l&&l.metadata.description&&(e=l.metadata.description)}),e=e.replace(`\r
`,"<br /><br /><br />"),e=e.replace("\r","<br /><br />"),e=e.replace(`
`,"<br /><br />"),e):""}),z=x(()=>{const e=V.value?160:260;return L.value.length>e?L.value.substring(0,e)+"...":L.value});return(e,l)=>(a(),d("div",null,[t(G,{variant:"flat",img:y(s),style:{"margin-top":"-10px","z-index":"0"},height:"30vh","max-height":"500px","min-height":"340px"},{default:i(()=>[e.item?c("",!0):(a(),f(ce,{key:0,indeterminate:""})),t(J,{width:"100%",height:"100%",cover:"",class:"background-image",src:_.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),t(E,{"xx-large":"",style:{width:"40px",height:"5px",left:"4px",top:"15px",bottom:"0",padding:"0"},icon:"mdi-arrow-left",title:e.$t("tooltip.back"),onClick:T(D,["stop"])},null,8,["title"]),e.item?(a(),f(Le,{key:1,style:{margin:"0",top:"50%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:i(()=>{var b;return[e.$vuetify.display.mobile?c("",!0):(a(),d("div",Te,[e.item.media_type&&[y(P).ARTIST,y(P).PLAYLIST].includes(e.item.media_type)?(a(),d("div",Ie,[t(Y,{size:"192"},{default:i(()=>[t(U,{item:e.item,size:"100%"},null,8,["item"])]),_:1})])):(a(),d("div",Re,[t(U,{size:"100%",item:e.item},null,8,["item"])]))])),h("div",null,[t(ge,null,{default:i(()=>[C(m(e.item.name),1)]),_:1}),h("div",Be,["version"in e.item&&e.item.version?(a(),f(w,{key:0,class:"caption"},{default:i(()=>[C(m(e.item.version)+" ",1),t(ve,{location:"bottom"},{activator:i(({props:n})=>[y(ae)(e.item.metadata.explicit||!1)?(a(),f($,F({key:0},n,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):c("",!0)]),default:i(()=>[h("span",null,m(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):c("",!0),"artists"in e.item&&e.item.artists?(a(),f(w,{key:1,class:"title accent--text"},{default:i(()=>[t($,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(a(!0),d(I,null,R(e.item.artists,(n,v)=>(a(),d("span",{key:n.item_id},[h("a",{style:{color:"accent"},onClick:Q=>o(n)},m(n.name),9,Pe),v+1<e.item.artists.length?(a(),d("span",{key:v,style:{color:"accent"}},m(" / "))):c("",!0)]))),128))]),_:1})):c("",!0),"owner"in e.item&&e.item.owner?(a(),f(w,{key:2,class:"title"},{default:i(()=>[t($,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),h("a",De,m(e.item.owner),1)]),_:1})):c("",!0),"album"in e.item&&e.item.album?(a(),f(w,{key:3},{default:i(()=>[t($,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),h("a",{style:{color:"secondary"},onClick:l[0]||(l[0]=n=>{var v;return g((v=e.item)==null?void 0:v.album)})},m(e.item.album.name),1)]),_:1})):c("",!0)]),h("div",Ae,[t(B,{color:"primary","prepend-icon":"mdi-play-circle",disabled:!((b=y(S).selectedPlayer)!=null&&b.available),onClick:l[1]||(l[1]=n=>y(me).emit("playdialog",{items:[e.item],parentItem:e.item,showContextMenuItems:!1}))},{default:i(()=>[C(m(e.$t("play")),1)]),_:1},8,["disabled"]),t(ye,null,{activator:i(({props:n})=>[t(E,F({icon:"",style:{"margin-top":"-8px"}},n),{default:i(()=>[t($,{icon:"mdi-dots-vertical"})]),_:2},1040)]),default:i(()=>[t(O,null,{default:i(()=>[(a(!0),d(I,null,R(y(ue)([e.item],e.item).filter(n=>n.hide!=!0),(n,v)=>(a(),f(W,{key:v,title:e.$t(n.label,n.labelArgs),disabled:n.disabled==!0,onClick:Q=>n.action?n.action():""},{prepend:i(()=>[t(Y,{icon:n.icon},null,8,["icon"])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1}),t(B,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[l[2]||(l[2]=n=>y(A).toggleFavorite(e.item)),l[3]||(l[3]=T(()=>{},["prevent"])),l[4]||(l[4]=T(()=>{},["stop"]))]},null,8,["icon","title"]),t(q,{domain:e.item.provider,size:25,style:{"margin-top":"4px"}},null,8,["domain"])]),z.value?(a(),f(w,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:l[5]||(l[5]=n=>p.value=!p.value)},{default:i(()=>[h("div",{innerHTML:z.value},null,8,ze)]),_:1})):c("",!0),e.item&&e.item.metadata.genres?(a(),d("div",He,[(a(!0),d(I,null,R(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),n=>(a(),f(Ve,{key:n,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:i(()=>[C(m(n),1)]),_:2},1024))),128))])):c("",!0)])]}),_:1})):c("",!0)]),_:1},8,["img"]),t(Ce,{modelValue:p.value,"onUpdate:modelValue":l[7]||(l[7]=b=>p.value=b),"max-width":"975",width:"auto"},{default:i(()=>[t(G,null,{default:i(()=>[t(be,{innerHTML:L.value},null,8,["innerHTML"]),t(he,null,{default:i(()=>[t(B,{color:"primary",block:"",onClick:l[6]||(l[6]=b=>p.value=!1)},{default:i(()=>[C(m(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});const xe={style:{"margin-bottom":"10px"}},Fe={key:0},Ne=["title","onClick"],Se=["title"],tt=K({__name:"ProviderDetails",props:{itemDetails:{}},setup(k){const r=function(s){window.open(s,"_blank")},p=oe({}),_=function(s){const u=`${s.provider_instance}.${s.item_id}`,g=p[u];if(g)g.load(),delete p[u];else{const o=new Audio(V(s.provider_instance,s.item_id));p[u]=o,o.play()}},V=function(s,u){return`${A.baseUrl}/preview?item_id=${encodeURIComponent(u)}&provider=${s}`};return(s,u)=>(a(),d("section",xe,[t($e,{color:"transparent",title:s.$t("mapped_providers"),style:{height:"55px"}},null,8,["title"]),t(fe),t(se,null,{default:i(()=>[t(O,null,{default:i(()=>{var g;return[(a(!0),d(I,null,R((g=s.itemDetails)==null?void 0:g.provider_mappings,o=>(a(),f(W,{key:o.provider_instance},{prepend:i(()=>[t(q,{domain:o.provider_domain,size:30},null,8,["domain"])]),title:i(()=>[C(m(y(A).providerManifests[o.provider_domain].name),1)]),subtitle:i(()=>[s.itemDetails.media_type==y(P).TRACK&&o.audio_format?(a(),d("span",Fe,m(o.audio_format.content_type)+" | "+m(o.audio_format.sample_rate/1e3)+"kHz/"+m(o.audio_format.bit_depth)+" bits | ",1)):c("",!0),o.url&&!o.provider_domain.startsWith("file")?(a(),d("a",{key:1,style:{opacity:"0.4"},title:s.$t("tooltip.open_provider_link"),onClick:T(D=>r(o.url),["prevent"])},m(o.url),9,Ne)):(a(),d("span",{key:2,style:{opacity:"0.4"},title:o.item_id},m(o.item_id),9,Se))]),append:i(()=>[o.audio_format&&o.audio_format.bit_depth>16?(a(),f(J,{key:0,src:y(re),width:"30",class:le(s.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):c("",!0),y(ne)("bp1")&&s.itemDetails.media_type==y(P).TRACK?(a(),f(B,{key:1,icon:p[`${o.provider_instance}.${o.item_id}`]?"mdi-pause":"mdi-play-circle",title:s.$t("tooltip.play_sample"),onClick:D=>_(o)},null,8,["icon","title","onClick"])):c("",!0)]),_:2},1024))),128))]}),_:1})]),_:1})]))}});export{et as _,tt as a};
