import{d as Q,r as x,o as he,a as Fe,b,M as A,P as ze,c as s,e as k,w as v,f as c,u as e,g as _,h as M,F as q,$ as le,i as f,t as P,j as w,s as t,p as We,k as Ae,l as se,m as re,n as pt,T as vt,K as yt,q as _t,v as be,x as Re,y as G,z as I,A as ft,B as pe,C as j,D as $,E as N,G as D,H as ce,I as U,J as ht,L as ve,N as K,O as B,Q as ye,R as X,S as L,U as He,V as ge,W as ie,X as Ee,Y as Z,Z as bt,_ as gt,a0 as kt,a1 as Pt,a2 as Ne,a3 as Le,a4 as Ue,a5 as Ct,a6 as Vt,a7 as Oe,a8 as wt,a9 as $t}from"./index-1fa25223.js";import{_ as It,g as Qt,V as xt}from"./DrawerNavigation.vue_vue_type_style_index_0_scoped_81e8d869_lang-0b706689.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";import{M as ke,i as Pe,a as Ge,_ as St,g as De}from"./helpers-f9fbf435.js";import{_ as de,C as Bt}from"./Container-55c3ff81.js";import{e as Me}from"./eventbus-d154090d.js";import{T as Tt}from"./Toolbar-77a90b60.js";import{V as ee,a as te,u as je}from"./VList-f519ecda.js";import{V as Ce,a as zt}from"./VCard-99bbc2f5.js";import{V as Ye}from"./VDialog-0a55bc34.js";import{V as O,m as ne,a as Ve,u as ue,b as Ke,c as Nt,d as Je,e as Xe,f as Lt,g as Ze,h as et,i as Dt,j as tt,k as lt,l as Mt,n as qt,o as S,p as Ft,q as Wt,r as At,s as Rt}from"./VListItem-53d44b85.js";import{_ as Ht}from"./ItemContextMenu.vue_vue_type_style_index_0_scoped_be40882c_lang-79825e42.js";import{u as Et,m as it,a as ot,b as Ut,c as Ot}from"./layout-6738e727.js";import{V as qe,a as me}from"./VTabs-6872acef.js";import{V as we,a as Gt}from"./VMenu-85495654.js";import{V as at,a as jt,b as Yt,c as Kt,d as Jt}from"./VExpansionPanel-b1f4b72e.js";import{B as F}from"./Button-0d671d73.js";import{V as st}from"./VBadge-3b97e665.js";import{L as Xt}from"./ListItem-9f85535e.js";import{V as Zt}from"./VToolbar-a7b4dbd4.js";import{V as el}from"./VLabel-148b546a.js";import{V as tl}from"./VCardText-bbb7eb1a.js";/* empty css              */const ll=W(It,[["__scopeId","data-v-81e8d869"]]),$e=r=>(We("data-v-d3dbeb83"),r=r(),Ae(),r),il=$e(()=>f("br",null,null,-1)),ol={class:"media-thumb"},al=$e(()=>f("div",{style:{height:"30px"}},null,-1)),sl=$e(()=>f("div",{style:{height:"30px"}},null,-1)),rl={style:{"margin-left":"-10px","padding-right":"5px"}},nl=Q({__name:"AddToPlaylistDialog",setup(r){const l=x(!1),m=x([]),i=x([]),a=x(),o=x([]);he(()=>{Me.on("playlistdialog",async h=>{l.value=!0,o.value=h.items,a.value=h.parentItem,await n()}),Fe(()=>{Me.off("playlistdialog")})});const n=async function(){m.value=[],i.value=[];const h=await b.getLibraryPlaylists(),u=o.value.length?o.value[0]:void 0;for(const d of h.items){if(!d.provider_mappings.filter(V=>V.available).length||!d.is_editable||a.value&&a.value.media_type===A.PLAYLIST&&d.item_id===a.value.item_id)continue;const C=b.providers[d.provider_mappings[0].provider_instance];(C.domain=="builtin"||C.is_streaming_provider||u!=null&&u.provider_mappings.filter(V=>V.provider_instance==C.instance_id).length)&&m.value.push(d)}for(const d of Object.values(b.providers))d.supported_features.includes(ze.PLAYLIST_CREATE)&&d.supported_features.includes(ze.PLAYLIST_TRACKS_EDIT)&&(d.domain=="builtin"||d.is_streaming_provider||u!=null&&u.provider_mappings.filter(C=>C.provider_instance==d.instance_id).length)&&i.value.push(d.instance_id)},y=function(h){if(o.value[0].media_type===A.TRACK)b.addPlaylistTracks(h.item_id,o.value.map(d=>d.uri));else if(o.value[0].media_type===A.ALBUM){var u=[];b.getAlbumTracks(o.value[0].item_id,o.value[0].provider).then(d=>{u=d,b.addPlaylistTracks(h.item_id,u.map(C=>C.uri))})}p()},g=async function(h){const u=prompt(le("new_playlist_name"));if(!u)return;const d=await b.createPlaylist(u,h);y(d)},p=function(){l.value=!1};return(h,u)=>(s(),k(Ye,{modelValue:l.value,"onUpdate:modelValue":[u[0]||(u[0]=d=>l.value=d),u[1]||(u[1]=d=>{e(t).dialogActive=d})],fullscreen:"",transition:"dialog-bottom-transition"},{default:v(()=>[c(Ce,null,{default:v(()=>[c(Tt,{icon:"mdi-playlist-plus",title:e(le)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:p}]},null,8,["title","menu-items"]),c(ee),il,c(te,null,{default:v(()=>[(s(!0),_(q,null,M(m.value,d=>(s(),_("div",{key:d.item_id},[c(O,{onClick:C=>y(d)},{prepend:v(()=>[f("div",ol,[c(ke,{item:d,size:50},null,8,["item"])])]),title:v(()=>[f("div",null,P(d.name),1)]),subtitle:v(()=>[f("div",null,P(d.owner),1)]),append:v(()=>[d.provider_mappings?(s(),k(de,{key:0,domain:d.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):w("",!0)]),_:2},1032,["onClick"])]))),128)),al,c(ee),sl,(s(!0),_(q,null,M(i.value,d=>(s(),_("div",{key:d},[c(O,{onClick:C=>g(d)},{prepend:v(()=>[f("div",rl,[c(de,{domain:e(b).providers[d].domain,size:50},null,8,["domain"])])]),title:v(()=>[f("div",null,P(e(le)("new_playlist")),1)]),subtitle:v(()=>[f("div",null,P(e(le)("create_playlist_on",[e(b).providers[d].name])),1)]),append:v(()=>[c(de,{domain:e(b).providers[d].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const ul=W(nl,[["__scopeId","data-v-d3dbeb83"]]),cl=W(Ht,[["__scopeId","data-v-be40882c"]]);const dl=se({scrollable:Boolean,...ne(),...Ve({tag:"main"})},"VMain"),ml=re()({name:"VMain",props:dl(),setup(r,l){let{slots:m}=l;const{mainStyles:i}=Et(),{ssrBootStyles:a}=je();return ue(()=>c(r.tag,{class:["v-main",{"v-main--scrollable":r.scrollable},r.class],style:[i.value,a.value,r.style]},{default:()=>{var o,n;return[r.scrollable?c("div",{class:"v-main__scroller"},[(o=m.default)==null?void 0:o.call(m)]):(n=m.default)==null?void 0:n.call(m)]}})),{}}}),pl=Q({__name:"View",setup(r){return(l,m)=>{const i=pt("router-view");return s(),k(ml,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:v(()=>[e(t).navigationMenuStyle=="vertical"?(s(),k(ll,{key:0})):w("",!0),c(i,{app:""},{default:v(({Component:a})=>[c(vt,{name:"fade",mode:"out-in"},{default:v(()=>[(s(),k(yt,{include:["artists","albums","tracks","playlists","browse"]},[(s(),k(_t(a)))],1024))]),_:2},1024)]),_:1}),c(ul),c(cl)]),_:1})}}});const vl=se({bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:r=>!r||["horizontal","shift"].includes(r)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...Ke(),...ne(),...Nt(),...Je(),...Xe(),...it({name:"bottom-navigation"}),...Ve({tag:"header"}),...Lt({modelValue:!0,selectedClass:"v-btn--selected"}),...be()},"VBottomNavigation"),yl=re()({name:"VBottomNavigation",props:vl(),emits:{"update:modelValue":r=>!0},setup(r,l){let{slots:m}=l;const{themeClasses:i}=Re(),{borderClasses:a}=Ze(r),{backgroundColorClasses:o,backgroundColorStyles:n}=et(G(r,"bgColor")),{densityClasses:y}=Dt(r),{elevationClasses:g}=tt(r),{roundedClasses:p}=lt(r),{ssrBootStyles:h}=je(),u=I(()=>Number(r.height)-(r.density==="comfortable"?8:0)-(r.density==="compact"?16:0)),d=G(r,"active"),{layoutItemStyles:C}=ot({id:r.name,order:I(()=>parseInt(r.order,10)),position:I(()=>"bottom"),layoutSize:I(()=>d.value?u.value:0),elementSize:u,active:d,absolute:G(r,"absolute")});return Mt(r,qt),ft({VBtn:{color:G(r,"color"),density:G(r,"density"),stacked:I(()=>r.mode!=="horizontal"),variant:"text"}},{scoped:!0}),ue(()=>c(r.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":d.value,"v-bottom-navigation--grow":r.grow,"v-bottom-navigation--shift":r.mode==="shift"},i.value,o.value,a.value,y.value,g.value,p.value,r.class],style:[n.value,C.value,{height:pe(u.value),transform:`translateY(${pe(d.value?0:100,"%")})`},h.value,r.style]},{default:()=>[m.default&&c("div",{class:"v-bottom-navigation__content"},[m.default()])]})),{}}}),_l={class:"menuButton"},fl={class:"menuButton"},hl={class:"menuButton"},bl=Q({__name:"BottomNavigation",props:{height:{}},setup(r){const l=Qt(),m=I(()=>{for(const i of l)if(j.currentRoute.value.path.startsWith(i.path))return!$("tablet")&&i.isLibraryNode?"library":i.label;return""});return(i,a)=>(s(),k(yl,{height:i.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"}},{default:v(()=>[e($)("tablet")?(s(),k(qe,{key:0,stacked:"",grow:"","show-arrows":!1,"model-value":m.value,nav:"",color:"accent","center-active":""},{default:v(()=>[(s(!0),_(q,null,M(e(l),o=>(s(),k(me,{key:o.label,to:o.path,value:o.label},{default:v(()=>[c(S,{size:"xx-large"},{default:v(()=>[D(P(o.icon),1)]),_:2},1024),f("span",_l,P(i.$t(o.label)),1)]),_:2},1032,["to","value"]))),128))]),_:1},8,["model-value"])):(s(),k(qe,{key:1,stacked:"",grow:"","show-arrows":!1,"model-value":m.value,nav:"",color:"accent"},{default:v(()=>[(s(!0),_(q,null,M(e(l).filter(o=>!o.isLibraryNode),o=>(s(),k(me,{key:o.label,to:o.path,value:o.label},{default:v(()=>[c(S,{size:"xx-large"},{default:v(()=>[D(P(o.icon),1)]),_:2},1024),f("span",fl,P(i.$t(o.label)),1)]),_:2},1032,["to","value"]))),128)),c(we,null,{activator:v(({props:o})=>[c(me,N({key:"library"},o,{value:"library"}),{default:v(()=>[c(S,{size:"xx-large"},{default:v(()=>[D("mdi-bookshelf")]),_:1}),f("span",hl,P(i.$t("library")),1)]),_:2},1040)]),default:v(()=>[c(te,null,{default:v(()=>[(s(!0),_(q,null,M(e(l).filter(o=>o.isLibraryNode),o=>(s(),k(O,{key:o.label,title:i.$t(o.label),"prepend-icon":o.icon,to:o.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})]),_:1},8,["model-value"]))]),_:1},8,["height"]))}});const gl={style:{width:"100%"}},kl={key:0,style:{display:"flex",flex:"1 1 auto","align-items":"center"}},Pl={style:{"z-index":"1"},class:"text-caption"},Cl={key:1,style:{width:"100%","padding-bottom":"0px"}},_e=Q({__name:"PlayerTimeline",props:{isProgressBar:{type:Boolean,default:!1},color:{default:"accent"}},setup(r){const l=r,m=x(!1),i=x(!0),a=x(!1),o=x(0),n=x(0),y=I(()=>t.curQueueItem?m.value?`-${ce(t.curQueueItem.duration-p.value)}`:`${ce(p.value)}`:"0:00"),g=I(()=>{if(!t.curQueueItem)return"0:00";const C=t.curQueueItem.duration;return ce(C)}),p=I(()=>a.value?(n.value=o.value,o.value):t.activePlayerQueue?t.activePlayerQueue.elapsed_time:0);U(p,C=>{a.value||(o.value=C)});const h=function(){a.value=!0},u=()=>{a.value=!1,d(n.value)},d=C=>{var V;a.value||b.queueCommandSeek(((V=t.activePlayerQueue)==null?void 0:V.queue_id)||"",Math.round(C))};return(C,V)=>{var z,R;return s(),_("div",gl,[e(t).activePlayerQueue&&!C.isProgressBar?(s(),_("div",kl,[f("div",{class:"text-caption",style:{cursor:"pointer","z-index":"1"},onClick:V[0]||(V[0]=T=>m.value?m.value=!1:m.value=!0)},P(y.value),1),c(at,{modelValue:o.value,"onUpdate:modelValue":V[1]||(V[1]=T=>o.value=T),disabled:!e(t).curQueueItem||((z=e(t).curQueueItem.media_item)==null?void 0:z.media_type)!=e(A).TRACK,color:l.color,style:{width:"100%"},min:0,max:e(t).curQueueItem&&e(t).curQueueItem.duration,"hide-details":"","track-size":2,"thumb-size":i.value?0:10,onTouchstart:V[2]||(V[2]=T=>i.value=!1),onTouchend:V[3]||(V[3]=T=>i.value=!0),onMouseenter:V[4]||(V[4]=T=>i.value=!1),onMouseleave:V[5]||(V[5]=T=>i.value=!0),onMousedown:h,onMouseup:u},null,8,["modelValue","disabled","color","max","thumb-size"]),f("div",Pl,P(g.value),1)])):e(t).activePlayerQueue&&C.isProgressBar?(s(),_("div",Cl,[c(Ft,{modelValue:o.value,"onUpdate:modelValue":V[6]||(V[6]=T=>o.value=T),disabled:!e(t).activePlayerQueue||!e(t).curQueueItem||((R=e(t).activePlayerQueue)==null?void 0:R.items)==0,height:"70",color:e(ht)(l.color,.15),"bg-color":l.color,"bg-opacity":1,style:{position:"absolute","border-radius":"10px"},min:0,max:e(t).curQueueItem&&e(t).curQueueItem.duration},null,8,["modelValue","disabled","color","bg-color","max"])])):w("",!0)])}}}),Vl=Q({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean}},setup(r){const l=r,m=()=>{if(i.value){const o=i.value.offsetWidth,n=i.value.offsetHeight,y=Math.min(o,n);a.value.$el.style.fontSize=`${y}px`}},i=x(),a=x();return he(()=>{m(),window.addEventListener("resize",m)}),Fe(()=>{window.removeEventListener("resize",m)}),(o,n)=>(s(),_("div",{ref_key:"responsiveIconHolder",ref:i,class:K([l.type=="btn"?"responsive-icon-holder-btn":"responsive-icon-holder",{disabled:o.disabled}]),style:B({width:l.staticWidth?l.staticWidth:l.width,height:l.staticWidth?l.staticWidth:l.height,maxHeight:l.staticHeight?l.staticHeight:l.maxHeight,maxWidth:l.staticWidth?l.staticWidth:l.maxWidth,minHeight:l.staticHeight?l.staticHeight:l.minHeight,minWidth:l.staticWidth?l.staticWidth:l.minWidth})},[o.type==="icon"?(s(),k(S,{key:0,ref_key:"responsiveIcon",ref:a,class:"responsive-icon",color:o.color?o.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null},ve({_:2},[M(o.$slots,(y,g)=>({name:g,fn:v(()=>[ye(o.$slots,g,{},void 0,!0)])}))]),1032,["color","icon","width","height"])):o.type==="btn"?(s(),k(S,{key:1,ref_key:"responsiveIcon",ref:a,class:"responsive-icon",style:{cursor:"pointer"},color:o.color?o.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:o.disabled},ve({_:2},[M(o.$slots,(y,g)=>({name:g,fn:v(()=>[ye(o.$slots,g,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):w("",!0)],6))}});const Y=W(Vl,[["__scopeId","data-v-5ed57264"]]),rt=Q({__name:"RepeatBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(r){const l=r;return(m,i)=>{var a,o,n,y,g,p,h,u,d,C;return l.isVisible?(s(),k(Y,N({key:0},l.icon,{disabled:!e(t).activePlayerQueue||!((a=e(t).activePlayerQueue)!=null&&a.active)||((o=e(t).activePlayerQueue)==null?void 0:o.items)==0,color:e(X)((n=l.icon)==null?void 0:n.color,[[((y=e(t).activePlayerQueue)==null?void 0:y.repeat_mode)==e(L).OFF,null],[((g=e(t).activePlayerQueue)==null?void 0:g.repeat_mode)==e(L).ALL,"secondary"],[((p=e(t).activePlayerQueue)==null?void 0:p.repeat_mode)==e(L).ONE,"secondary"]]),icon:e(X)((h=l.icon)==null?void 0:h.icon,[[((u=e(t).activePlayerQueue)==null?void 0:u.repeat_mode)==e(L).OFF,"mdi-repeat-off"],[((d=e(t).activePlayerQueue)==null?void 0:d.repeat_mode)==e(L).ALL,"mdi-repeat"],[((C=e(t).activePlayerQueue)==null?void 0:C.repeat_mode)==e(L).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:i[0]||(i[0]=V=>{var z,R,T,J;return e(b).queueCommandRepeat(((z=e(t).activePlayerQueue)==null?void 0:z.queue_id)||"",e(X)(null,[[((R=e(t).activePlayerQueue)==null?void 0:R.repeat_mode)==e(L).OFF,e(L).ONE],[((T=e(t).activePlayerQueue)==null?void 0:T.repeat_mode)==e(L).ALL,e(L).OFF],[((J=e(t).activePlayerQueue)==null?void 0:J.repeat_mode)==e(L).ONE,e(L).ALL]]))})}),null,16,["disabled","color","icon"])):w("",!0)}}}),nt=Q({__name:"ShuffleBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(r){const l=r;return(m,i)=>{var a,o,n,y,g,p,h;return l.isVisible?(s(),k(Y,N({key:0},l.icon,{disabled:!e(t).activePlayerQueue||!((a=e(t).activePlayerQueue)!=null&&a.active)||((o=e(t).activePlayerQueue)==null?void 0:o.items)==0,color:e(X)((n=l.icon)==null?void 0:n.color,[[(y=e(t).activePlayerQueue)==null?void 0:y.shuffle_enabled,"secondary",""]]),icon:e(X)((g=l.icon)==null?void 0:g.icon,[[(p=e(t).activePlayerQueue)==null?void 0:p.shuffle_enabled,"mdi-shuffle"],[((h=e(t).activePlayerQueue)==null?void 0:h.shuffle_enabled)==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:i[0]||(i[0]=u=>{var d,C;return e(b).queueCommandShuffle(((d=e(t).activePlayerQueue)==null?void 0:d.queue_id)||"",!((C=e(t).activePlayerQueue)!=null&&C.shuffle_enabled))})}),null,16,["disabled","color","icon"])):w("",!0)}}}),ut=Q({__name:"PlayBtn",props:{isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0}},setup(r){const l=r;return(m,i)=>{var a,o,n,y,g,p;return e(t).activePlayerQueue&&((a=e(t).activePlayerQueue)!=null&&a.active)&&l.isVisible?(s(),k(Y,N({key:0},l.icon,{disabled:e(t).activePlayerQueue&&!((o=e(t).activePlayerQueue)!=null&&o.active)&&((n=e(t).activePlayerQueue)==null?void 0:n.items)==0,icon:((y=e(t).activePlayerQueue)==null?void 0:y.state)=="playing"?l.withCircle?"mdi-pause-circle":"mdi-pause":l.withCircle?"mdi-play-circle":"mdi-play",type:"btn",onClick:i[0]||(i[0]=h=>e(b).queueCommandPlayPause(e(t).activePlayerQueue.queue_id))}),null,16,["disabled","icon"])):((g=e(t).selectedPlayer)==null?void 0:g.state)==e(He).PLAYING&&l.isVisible?(s(),k(Y,N({key:1},l.icon,{icon:"mdi-stop",type:"btn",onClick:i[1]||(i[1]=h=>e(b).queueCommandStop(e(t).selectedPlayer.player_id))}),null,16)):l.isVisible?(s(),k(Y,N({key:2},l.icon,{disabled:!e(t).activePlayerQueue||((p=e(t).activePlayerQueue)==null?void 0:p.items)==0,icon:l.withCircle?"mdi-play-circle":"mdi-play",type:"btn",onClick:i[2]||(i[2]=h=>{var u;return e(b).queueCommandPlay(((u=e(t).activePlayerQueue)==null?void 0:u.queue_id)||e(t).selectedPlayer.player_id)})}),null,16,["disabled","icon"])):w("",!0)}}}),ct=Q({__name:"PreviousBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(r){const l=r;return(m,i)=>{var a,o;return l.isVisible?(s(),k(Y,N({key:0},l.icon,{disabled:!e(t).activePlayerQueue||!((a=e(t).activePlayerQueue)!=null&&a.active)||((o=e(t).activePlayerQueue)==null?void 0:o.items)==0,icon:"mdi-skip-previous-outline",type:"btn",onClick:i[0]||(i[0]=n=>e(b).queueCommandPrevious(e(t).activePlayerQueue.queue_id))}),null,16,["disabled"])):w("",!0)}}}),dt=Q({__name:"NextBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(r){const l=r;return(m,i)=>{var a,o;return l.isVisible?(s(),k(Y,N({key:0},l.icon,{disabled:!e(t).activePlayerQueue||!((a=e(t).activePlayerQueue)!=null&&a.active)||((o=e(t).activePlayerQueue)==null?void 0:o.items)==0,icon:"mdi-skip-next-outline",type:"btn",onClick:i[0]||(i[0]=n=>e(b).queueCommandNext(e(t).activePlayerQueue.queue_id))}),null,16,["disabled"])):w("",!0)}}}),wl={key:0,style:{display:"inline-flex"}},$l={key:0,class:"player-controls-elements"},Il={key:1,class:"player-controls-elements"},Ql={key:2},xl={key:3,class:"player-controls-elements"},Sl={key:4,class:"player-controls-elements"},ae=Q({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(r){const l=r;return(m,i)=>{var a,o,n,y,g;return l.visibleComponents?(s(),_("div",wl,[l.visibleComponents&&((a=l.visibleComponents.shuffle)!=null&&a.isVisible)?(s(),_("div",$l,[c(nt,{class:"media-controls-item",icon:l.visibleComponents.shuffle.icon},null,8,["icon"])])):w("",!0),l.visibleComponents&&((o=l.visibleComponents.previous)!=null&&o.isVisible)?(s(),_("div",Il,[c(ct,{class:"media-controls-item",icon:l.visibleComponents.previous.icon},null,8,["icon"])])):w("",!0),l.visibleComponents&&((n=l.visibleComponents.play)!=null&&n.isVisible)?(s(),_("div",Ql,[c(ut,{class:"media-controls-item","with-circle":l.visibleComponents.play.withCircle,icon:l.visibleComponents.play.icon},null,8,["with-circle","icon"])])):w("",!0),l.visibleComponents&&((y=l.visibleComponents.next)!=null&&y.isVisible)?(s(),_("div",xl,[c(dt,{icon:l.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["icon"])])):w("",!0),l.visibleComponents&&((g=l.visibleComponents.repeat)!=null&&g.isVisible)?(s(),_("div",Sl,[c(rt,{icon:l.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["icon"])])):w("",!0)])):w("",!0)}}});const Bl=Q({__name:"QueueBtn",props:{color:{}},setup(r){const l=r;return(m,i)=>(s(),k(F,{variant:"icon",icon:"mdi-playlist-play",color:l.color?m.color:"",onClick:i[0]||(i[0]=a=>{e(t).showFullscreenPlayer=!1,e(j).push("/playerqueue/")})},null,8,["color"]))}}),Tl={key:2,class:"line-clamp-1 no_transform"},zl=Q({__name:"SpeakerBtn",props:{color:{}},setup(r){const l=r,m=I(()=>{var a;if(!t.selectedPlayer)return 0;let i=0;for(const o of t.selectedPlayer.group_childs){const n=(a=b)==null?void 0:a.players[o];n&&n.available&&n.powered&&i++}return i});return(i,a)=>(s(),k(F,{variant:"icon",ripple:!1,icon:!e($)("bp6"),onClick:a[0]||(a[0]=o=>e(t).showPlayersMenu=!0)},{default:v(()=>{var o,n;return[(o=e(t).selectedPlayer)!=null&&o.group_childs.length?(s(),k(st,{key:0,size:"small",content:m.value},{default:v(()=>[c(S,{color:l.color?i.color:"",size:24},{default:v(()=>[D("mdi-speaker-multiple")]),_:1},8,["color"])]),_:1},8,["content"])):(s(),k(S,{key:1,color:l.color?i.color:"",size:24},{default:v(()=>[D("mdi-speaker")]),_:1},8,["color"])),e(t).activePlayerQueue&&e($)("bp6")?(s(),_("span",Tl,P(e(ge)((n=e(t).activePlayerQueue)==null?void 0:n.display_name,e($)("bp7")?16:8)),1)):w("",!0)]}),_:1},8,["icon"]))}});const Nl={props:{width:String,height:String,style:String,isPowered:Boolean},emits:["update:model-value"],setup(r,l){const m=x(!0),i=I(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:m.value?0:10,step:2,elevation:0,disabled:!r.isPowered,style:`width: ${r.width}; height:${r.height}; display: inline-grid; ${r.style}`})),a=I(()=>({...i.value,...l}));return{isThumbHidden:m,playerVolumeProps:a,onWheel:({deltaY:n})=>{const y=a.value.step,g=l.attrs["model-value"],p=n<0?y:-y;l.emit("update:model-value",g+p)}}}};function Ll(r,l,m,i,a,o){return s(),k(at,N(i.playerVolumeProps,{onTouchstart:l[0]||(l[0]=n=>i.isThumbHidden=!1),onTouchend:l[1]||(l[1]=n=>i.isThumbHidden=!0),onMouseenter:l[2]||(l[2]=n=>i.isThumbHidden=!1),onMouseleave:l[3]||(l[3]=n=>i.isThumbHidden=!0),onWheel:i.onWheel,"onUpdate:modelValue":l[4]||(l[4]=n=>r.$emit("update:model-value",n))}),ve({_:2},[M(r.$slots,(n,y)=>({name:y,fn:v(()=>[ye(r.$slots,y,{},void 0,!0)])}))]),1040,["onWheel"])}const fe=W(Nl,[["render",Ll],["__scopeId","data-v-a6e8aec7"]]),Dl={class:"text-center"},Ml={class:"text-caption"},ql={class:"text-center"},Fl={key:0,class:"text-caption"},Wl={key:1,class:"text-caption"},Al={key:0,class:"syncbtn"},Rl={key:1,class:"syncbtn"},Hl=Q({__name:"VolumeControl",props:{player:{}},setup(r){const l=function(i){var o;const a=[];i.type!=ie.GROUP&&i.type!=ie.SYNC_GROUP&&a.push(i);for(const n of i.group_childs){const y=(o=b)==null?void 0:o.players[n];y&&y.available&&!a.includes(y)&&a.push(y)}return a.sort((n,y)=>n.display_name.toUpperCase()>y.display_name.toUpperCase()?1:-1),a},m=function(i,a){i.type==ie.GROUP||i.type==ie.SYNC_GROUP||i.group_childs.length>0?b.playerCommandGroupPower(i.player_id,a):b.playerCommandPower(i.player_id,a)};return(i,a)=>(s(),k(te,{style:{overflow:"hidden"},lines:"two"},{default:v(()=>[i.player.group_childs.length>0?(s(),k(O,{key:0},{prepend:v(()=>[f("div",{style:B(i.player.powered?"opacity: 0.75":"opacity: 0.5")},[f("div",Dl,[c(F,{icon:"",style:{height:"25px !important"},onClick:a[0]||(a[0]=o=>m(i.player,!i.player.powered))},{default:v(()=>[c(S,{size:25,icon:i.player.volume_muted?"mdi-volume-off":"mdi-power"},null,8,["icon"])]),_:1}),f("div",Ml,P(i.player.group_volume),1)])],4)]),default:v(()=>[f("div",{class:"volumesliderrow",style:B(i.player.powered?"opacity: 0.75":"opacity: 0.5")},[f("h6",null,P(e(Ee)(i.player,27)),1),c(fe,{class:"vc-slider",width:"100%",color:"secondary","is-powered":i.player.powered,"model-value":Math.round(i.player.group_volume),"onUpdate:modelValue":a[1]||(a[1]=o=>e(b).playerCommandGroupVolume(i.player.player_id,o))},null,8,["is-powered","model-value"])],4)]),_:1})):w("",!0),i.player.group_childs.length>0?(s(),k(ee,{key:1,style:{"margin-top":"7px","margin-bottom":"7px"}})):w("",!0),(s(!0),_(q,null,M(l(i.player),o=>(s(),k(O,{key:o.player_id,style:B(o.powered?"opacity: 0.75":"opacity: 0.5")},{prepend:v(()=>[f("div",null,[f("div",ql,[c(F,{icon:"",style:{height:"25px !important"},onClick:n=>e(b).playerCommandPowerToggle(o.player_id)},{default:v(()=>[c(S,{size:25,icon:"mdi-power"})]),_:2},1032,["onClick"]),o.volume_muted?(s(),_("div",Fl,P(i.$t("muted")),1)):(s(),_("div",Wl,P(o.volume_level),1))])])]),default:v(()=>[f("div",{class:"volumesliderrow",style:B(o.powered?"opacity: 0.75":"opacity: 0.5")},[f("h6",null,P(e(ge)(o.display_name,27)),1),c(fe,{class:"vc-slider",width:"100%",color:"secondary","is-powered":o.powered,"model-value":Math.round(o.volume_level),"onUpdate:modelValue":n=>e(b).playerCommandVolumeSet(o.player_id,n)},null,8,["is-powered","model-value","onUpdate:modelValue"])],4)]),append:v(()=>[f("div",{style:B(o.powered?"opacity: 0.75":"opacity: 0.5")},[!o.synced_to&&o.can_sync_with.length&&Object.values(e(b).players).filter(n=>!n.synced_to&&n.can_sync_with.includes(o.player_id)).length>0?(s(),_("div",Al,[c(we,{location:"bottom end",style:{"z-index":"999999"}},{activator:v(({props:n})=>[c(F,N({icon:"",ref_for:!0},n),{default:v(()=>[c(S,null,{default:v(()=>[D("mdi-link-variant")]),_:1})]),_:2},1040)]),default:v(()=>[c(te,null,{default:v(()=>[c(zt,null,{default:v(()=>[D(P(i.$t("sync_player_to")),1)]),_:1}),(s(!0),_(q,null,M(Object.values(e(b).players).filter(n=>!n.synced_to&&n.can_sync_with.includes(o.player_id)),n=>(s(),k(Xt,{key:n.player_id,title:n.display_name,onClick:y=>e(b).playerCommandSync(o.player_id,n.player_id)},null,8,["title","onClick"]))),128)),c(ee)]),_:2},1024)]),_:2},1024)])):w("",!0),o.synced_to?(s(),_("div",Rl,[c(F,{icon:"",onClick:n=>e(b).playerCommandUnSync(o.player_id)},{default:v(()=>[c(S,null,{default:v(()=>[D("mdi-link-variant-off")]),_:1})]),_:2},1032,["onClick"])])):w("",!0)],4)]),_:2},1032,["style"]))),128))]),_:1}))}});const mt=W(Hl,[["__scopeId","data-v-902945d8"]]),El={key:0},Ul={key:0},Ol={class:"text-caption"},Gl={key:1},jl=Q({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(r){const l=r,m=x(!1);return(i,a)=>l.isVisible&&e(t).selectedPlayer?(s(),_("div",El,[c(we,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=o=>m.value=o),class:"volume-control-dialog","close-on-content-click":!1,scrim:i.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:v(({props:o})=>{var n,y;return[e($)("bp5")||!i.responsiveVolumeSize?(s(),_("div",Ul,[c(fe,{style:"margin-right: 0px; margin-left: 0px;",width:i.volumeSize,"is-powered":!0,"model-value":e(t).selectedPlayer.group_childs.length>0?Math.round(((n=e(t).selectedPlayer)==null?void 0:n.group_volume)||0):Math.round(((y=e(t).selectedPlayer)==null?void 0:y.volume_level)||0),"onUpdate:modelValue":a[0]||(a[0]=g=>{var p,h;return e(t).selectedPlayer.group_childs.length>0?e(b).playerCommandGroupVolume(((p=e(t).selectedPlayer)==null?void 0:p.player_id)||"",g):e(b).playerCommandVolumeSet(((h=e(t).selectedPlayer)==null?void 0:h.player_id)||"",g)})},{prepend:v(()=>[c(F,N({variant:"icon",size:"48",ripple:!1},{...o}),{default:v(()=>{var g,p;return[c(S,{color:l.color?i.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),f("div",Ol,P(e(t).selectedPlayer.group_childs.length>0?Math.round(((g=e(t).selectedPlayer)==null?void 0:g.group_volume)||0):Math.round(((p=e(t).selectedPlayer)==null?void 0:p.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(s(),_("div",Gl,[c(F,N({...o},{size:"48",variant:"icon"}),{default:v(()=>{var g,p;return[c(S,{color:l.color?i.color:"",icon:"mdi-volume-high"},null,8,["color"]),f("div",{class:"text-caption",style:B({color:l.color?i.color:""})},P(e(t).selectedPlayer.group_childs.length>0?Math.round(((g=e(t).selectedPlayer)==null?void 0:g.group_volume)||0):Math.round(((p=e(t).selectedPlayer)==null?void 0:p.volume_level)||0)),5)]}),_:2},1040)]))]}),default:v(()=>[c(Ce,{"min-width":300},{default:v(()=>[c(te,{style:{overflow:"hidden"},lines:"two"},{default:v(()=>{var o,n,y;return[c(O,{density:"compact","two-line":"",title:(o=e(t).selectedPlayer)==null?void 0:o.display_name.substring(0,25),subtitle:(n=e(t).selectedPlayer)!=null&&n.powered?i.$t("state."+((y=e(t).selectedPlayer)==null?void 0:y.state)):i.$t("state.off")},{prepend:v(()=>[c(S,{size:"50",icon:e(t).selectedPlayer.icon,color:"primary"},null,8,["icon"])]),_:1},8,["title","subtitle"]),c(ee),e(t).selectedPlayer?(s(),k(mt,{key:0,player:e(t).selectedPlayer},null,8,["player"])):w("",!0)]}),_:1})]),_:1})]),_:1},8,["modelValue","scrim"])])):w("",!0)}});const Yl=W(jl,[["__scopeId","data-v-2596bf36"]]),oe=Q({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(r){const l=r;return(m,i)=>(s(),_(q,null,[l.player&&l.player.isVisible?(s(),k(zl,{key:0,color:l.player.color},null,8,["color"])):w("",!0),l.queue&&l.queue.isVisible?(s(),k(Bl,{key:1,color:l.queue.color},null,8,["color"])):w("",!0),l.volume&&l.volume.isVisible?(s(),k(Yl,{key:2,color:l.volume.color,"volume-size":l.volume.volumeSize,"responsive-volume-size":l.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):w("",!0)],64))}}),Ie=r=>(We("data-v-a80df3a9"),r=r(),Ae(),r),Kl=Ie(()=>f("div",{class:"fullscreen-media-space"},null,-1)),Jl={class:"fullscreen-row-centered"},Xl={class:"fullscreen-row"},Zl={key:0,class:"fullscreen-track-info"},ei={key:2},ti={key:1,class:"fullscreen-track-info-subtitle"},li={key:3,style:{cursor:"pointer"},class:"line-clamp-1"},ii=Ie(()=>f("br",null,null,-1)),oi=Ie(()=>f("br",null,null,-1)),ai={key:4,class:"fullscreen-track-info-subtitle"},si={key:5,class:"fullscreen-track-info-subtitle"},ri={key:6,class:"fullscreen-track-info-subtitle"},ni={class:"fullscreen-row",style:{margin:"0 10px"}};const ui={class:"fullscreen-row"},ci={key:1,class:"fullscreen-media-controls"},di={class:"media-controls-item",style:{display:"grid","align-content":"center"}},mi={class:"media-controls-item fullscreen-row-centered"},pi={style:{width:"100%"}},vi={class:"fullscreen-mediacontrols-right media-controls-item"},yi={class:"fullscreen-media-controls-bottom",if:"store.activePlayerQueue"},_i={key:0},fi={class:"line-clamp-1"},hi={style:{"text-align":"end"}},bi=Q({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(r){const l=r,m=x(""),i=x(),a=I(()=>{if(t.selectedPlayer)return t.selectedPlayer.group_childs}),o=I(()=>Z.theme.current.value.dark?Pe:Ge),n=function(u){j.push({name:"track",params:{itemId:u.item_id,provider:u.provider}}),t.showFullscreenPlayer=!1},y=function(u){j.push({name:"artist",params:{itemId:u.item_id,provider:u.provider}}),t.showFullscreenPlayer=!1},g=function(u){j.push({name:"album",params:{itemId:u.item_id,provider:u.provider}}),t.showFullscreenPlayer=!1},p=function(u){j.push({name:"radio",params:{itemId:u.item_id,provider:u.provider}}),t.showFullscreenPlayer=!1},h=function(u){t.globalSearchTerm=u,j.push({name:"search"}),t.showFullscreenPlayer=!1};return U(()=>t.curQueueItem,async u=>{u&&u.media_item&&u.media_item.media_type===A.TRACK&&(i.value=await b.getItemByUri(u.media_item.uri))}),U(()=>l.colorPalette,u=>{!u.darkColor||!u.lightColor?m.value=Z.theme.current.value.dark?"#000":"#fff":m.value=Z.theme.current.value.dark?u.darkColor:u.lightColor}),(u,d)=>(s(),k(Ye,{modelValue:e(t).showFullscreenPlayer,"onUpdate:modelValue":d[7]||(d[7]=C=>e(t).showFullscreenPlayer=C),fullscreen:"",scrim:!1,style:{overflow:"hidden"},transition:"dialog-bottom-transition"},{default:v(()=>[c(Ce,{color:e(bt)(m.value,77,40)},{default:v(()=>[c(Zt,{class:"v-toolbar-default",color:"transparent"},{prepend:v(()=>[c(F,{icon:"",onClick:d[0]||(d[0]=C=>e(t).showFullscreenPlayer=!1)},{default:v(()=>[c(S,{icon:"mdi-chevron-down"})]),_:1})]),_:1}),c(Bt,{class:"fullscreen-container"},{default:v(()=>{var V,z,R,T,J,Qe,xe,Se,Be,Te;return[Kl,f("div",Jl,[(e(t).curQueueItem&&e($)({breakpoint:"mobile"})&&e($)({breakpoint:"bp3",condition:"lt"}),e(t).curQueueItem?(s(),k(ke,{key:1,item:e(t).curQueueItem.media_item||e(t).curQueueItem,size:e($)({breakpoint:"bp3",condition:"lt"})?512:1024,style:{height:"min(calc(100vw - 40px), calc(100vh - 340px))",width:"min(calc(100vw - 40px), calc(100vh - 340px))"},thumbnail:!1},null,8,["item","size"])):(s(),k(Wt,{key:2,src:o.value,style:{height:"min(calc(100vw - 40px), calc(100vh - 340px))",width:"min(calc(100vw - 40px), calc(100vh - 340px))"}},null,8,["src"])))]),f("div",Xl,[e(t).curQueueItem&&e(t).curQueueItem.media_item?(s(),_("div",Zl,[(V=e(t).curQueueItem)!=null&&V.media_item&&((z=e(t).curQueueItem.media_item)==null?void 0:z.media_type)==e(A).RADIO?(s(),_("h2",{key:0,style:{cursor:"pointer",width:"fit-content",display:"inline"},class:"title line-clamp-1",onClick:d[1]||(d[1]=H=>{var E;return(E=e(t).curQueueItem)!=null&&E.media_item?p(e(t).curQueueItem.media_item):""})},P(e(t).curQueueItem.media_item.name),1)):(s(),_("h2",{key:1,style:{cursor:"pointer",width:"fit-content",display:"inline"},class:"title line-clamp-1",onClick:d[2]||(d[2]=H=>{var E;return(E=e(t).curQueueItem)!=null&&E.media_item?n(e(t).curQueueItem.media_item):""})},P(`${e(t).curQueueItem.media_item.name} ${"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?"("+e(t).curQueueItem.media_item.version+")":""}`),1)),((R=e(t).curQueueItem.media_item)==null?void 0:R.media_type)==e(A).RADIO&&((J=(T=e(t).curQueueItem)==null?void 0:T.streamdetails)!=null&&J.stream_title)?(s(),_("div",ei,[e(t).curQueueItem.streamdetails.stream_title.includes(" - ")?(s(),_("h4",{key:0,class:"fullscreen-track-info-subtitle",style:{cursor:"pointer"},onClick:d[3]||(d[3]=H=>h(e(t).curQueueItem.streamdetails.stream_title))},P(e(t).curQueueItem.streamdetails.stream_title),1)):(s(),_("h4",ti,P(e(t).curQueueItem.streamdetails.stream_title),1))])):((Qe=e(t).curQueueItem.media_item)==null?void 0:Qe.media_type)==e(A).TRACK&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists?(s(),_("div",li,[f("h4",null,["album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album?(s(),_("span",{key:0,class:"fullscreen-track-info-subtitle",onClick:d[4]||(d[4]=H=>g(e(t).curQueueItem.media_item.album))},P(e(t).curQueueItem.media_item.album.name),1)):w("",!0),f("span",{class:"fullscreen-track-info",onClick:d[5]||(d[5]=H=>y(e(t).curQueueItem.media_item.artists[0]))},[ii,oi,D(P(e(t).curQueueItem.media_item.artists[0].name),1)])])])):e(t).curQueueItem&&((xe=e(t).curQueueItem.media_item)!=null&&xe.metadata.description)?(s(),_("h4",ai,P(e(t).curQueueItem.media_item.metadata.description),1)):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(s(),_("h4",si,P(u.$t("queue_empty")),1)):((Se=e(t).selectedPlayer)==null?void 0:Se.active_source)!=((Be=e(t).selectedPlayer)==null?void 0:Be.player_id)?(s(),_("h4",ri,P(u.$t("external_source_active",[(Te=e(t).selectedPlayer)==null?void 0:Te.active_source])),1)):w("",!0)])):w("",!0)]),f("div",ni,[c(_e,{"is-progress-bar":!1,color:u.$vuetify.theme.current.dark?l.colorPalette.lightColor:l.colorPalette.darkColor},null,8,["color"])]),w("",!0),f("div",ui,[e($)({breakpoint:"bp3",condition:"lt"})?(s(),k(oe,{key:0,queue:{isVisible:!1},player:{isVisible:!1},volume:{isVisible:!0,volumeSize:"100%",responsiveVolumeSize:!1}})):w("",!0)]),e($)({breakpoint:"bp3",condition:"lt"})?(s(),_("div",ci,[c(nt,{class:"media-controls-item","max-height":"24px"}),c(ct,{class:"media-controls-item","max-height":"35px"}),c(ut,{class:"media-controls-item","max-height":"80px"}),c(dt,{class:"media-controls-item","max-height":"35px"}),c(rt,{class:"media-controls-item","max-height":"24px"})])):(s(),_("div",{key:2,class:"fullscreen-media-controls",style:B({paddingTop:"1vh",flex:e($)({breakpoint:"bp3",condition:"lt"})?"1 1 auto":"0 1 auto"})},[f("div",di,[c(St)]),f("div",mi,[f("div",pi,[c(ae,{"visible-components":{repeat:{isVisible:e($)("bp3")},shuffle:{isVisible:e($)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"}},previous:{isVisible:e($)("bp3")},next:{isVisible:e($)("bp3")}}},null,8,["visible-components"])])]),f("div",vi,[f("div",null,[c(ae,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e($)({breakpoint:"bp3",condition:"lt"})},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"]),c(oe,{queue:{isVisible:e($)("bp3")},player:{isVisible:!0},volume:{isVisible:e($)("bp0")}},null,8,["queue","volume"])])])],4)),f("div",yi,[e($)({breakpoint:"bp3",condition:"lt"})?(s(),_("div",_i,[c(F,{onClick:d[6]||(d[6]=H=>{e(t).showFullscreenPlayer=!1,e(t).showPlayersMenu=!0})},{default:v(()=>{var H,E;return[a.value&&a.value.length>0?(s(),k(st,{key:0,content:(H=e(t).selectedPlayer)==null?void 0:H.group_childs.length,color:u.$vuetify.theme.current.dark?l.colorPalette.lightColor:l.colorPalette.darkColor},{default:v(()=>[c(S,{size:30},{default:v(()=>[D("mdi-speaker")]),_:1})]),_:1},8,["content","color"])):(s(),k(S,{key:1,size:30},{default:v(()=>[D("mdi-speaker")]),_:1})),f("div",fi,P((E=e(t).activePlayerQueue)==null?void 0:E.display_name),1)]}),_:1})])):w("",!0),f("div",hi,[c(oe,{queue:{isVisible:e($)({breakpoint:"bp3",condition:"lt"})},player:{isVisible:!1},volume:{isVisible:!1}},null,8,["queue"])])])]}),_:1})]),_:1},8,["color"])]),_:1},8,["modelValue"]))}});const gi=W(bi,[["__scopeId","data-v-a80df3a9"]]),ki={key:0},Pi={key:1},Ci={key:2},Vi={class:"d-flex justify-center",style:{width:"100%"}},wi={key:0},$i={key:1},Ii={key:2,class:"line-clamp-1"},Qi={key:3,class:"line-clamp-1"},xi={key:4,class:"line-clamp-1"},Si={key:5,class:"line-clamp-1"},Bi=Q({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(r){const l=r,m=I(()=>{var i,a;return(a=(i=t.activePlayerQueue)==null?void 0:i.current_item)==null?void 0:a.streamdetails});return(i,a)=>(s(),k(O,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:v(()=>{var o;return[f("div",{class:"media-thumb player-media-thumb",style:B(`height: ${e($)({breakpoint:"phone"})?50:64}px; width: ${e($)({breakpoint:"phone"})?50:64}px; `)},[c(gi,{"show-fullscreen":e(t).showFullscreenPlayer,"color-palette":i.colorPalette},null,8,["show-fullscreen","color-palette"]),c(ke,{item:((o=e(t).curQueueItem)==null?void 0:o.media_item)||e(t).curQueueItem,fallback:e(Pe),style:{cursor:"pointer"},onClick:a[0]||(a[0]=n=>e(t).showFullscreenPlayer=!0)},null,8,["item","fallback"])],4)]}),title:v(()=>{var o;return[f("div",{style:B({cursor:"pointer",color:i.primaryColor})},[e(t).curQueueItem&&e(t).curQueueItem.media_item?(s(),_("div",{key:0,onClick:a[1]||(a[1]=n=>e(t).showFullscreenPlayer=!0)},[D(P(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(s(),_("span",ki,"("+P(e(t).curQueueItem.media_item.version)+")",1)):w("",!0)])):e(t).curQueueItem?(s(),_("div",Pi,P(e(t).curQueueItem.name),1)):(s(),_("div",Ci,P((o=e(t).activePlayerQueue)==null?void 0:o.display_name),1))],4)]}),append:v(()=>{var o,n,y;return[(o=m.value)!=null&&o.audio_format.content_type&&!e($)({breakpoint:"phone"})&&i.showQualityDetailsBtn?(s(),k(el,N({key:0,disabled:!e(t).activePlayerQueue||!((n=e(t).activePlayerQueue)!=null&&n.active)||((y=e(t).activePlayerQueue)==null?void 0:y.items)==0,class:"player-track-content-type",style:i.$vuetify.theme.current.dark?"color: #000; background: #fff; margin-left: 15px;":"color: #fff; background: #000; margin-left: 15px;",label:"",ripple:!1},l),{default:v(()=>[f("div",Vi,P(m.value.audio_format.content_type.toUpperCase()),1)]),_:1},16,["disabled","style"])):w("",!0)]}),subtitle:v(()=>{var o,n,y,g,p,h,u,d,C;return[f("div",{style:B({cursor:"pointer",color:i.primaryColor}),class:"line-clamp-1",onClick:a[2]||(a[2]=V=>e(t).showFullscreenPlayer=!0)},[e(t).curQueueItem&&((o=e(t).curQueueItem.media_item)==null?void 0:o.media_type)==e(A).TRACK&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album&&!l.showOnlyArtist?(s(),_("div",wi,P(e(gt)(e(t).curQueueItem.media_item.artists))+" • "+P(e(t).curQueueItem.media_item.album.name),1)):e(t).curQueueItem&&e(t).curQueueItem.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length>0?(s(),_("div",$i,P(e(t).curQueueItem.media_item.artists[0].name),1)):(y=(n=e(t).curQueueItem)==null?void 0:n.streamdetails)!=null&&y.stream_title?(s(),_("div",Ii,P((p=(g=e(t).curQueueItem)==null?void 0:g.streamdetails)==null?void 0:p.stream_title),1)):e(t).curQueueItem&&((h=e(t).curQueueItem.media_item)!=null&&h.metadata.description)?(s(),_("div",Qi,P(e(t).curQueueItem.media_item.metadata.description),1)):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(s(),_("div",xi,P(i.$t("queue_empty")),1)):((u=e(t).selectedPlayer)==null?void 0:u.active_source)!=((d=e(t).selectedPlayer)==null?void 0:d.player_id)?(s(),_("div",Si,P(i.$t("external_source_active",[(C=e(t).selectedPlayer)==null?void 0:C.active_source])),1)):w("",!0)],4)]}),_:1}))}});const Ti={style:{width:"100%"}},zi={class:"mediacontrols-bottom-right"},Ni=Q({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(r){Re();const l=x({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),m=new Image;m.src=Z.theme.current.value.dark?Pe:Ge,m.crossOrigin="Anonymous",m.addEventListener("load",function(){l.value=kt(m)});const i=I(()=>Z.theme.current.value.dark?l.value&&l.value.darkColor?l.value.darkColor+"26":"CCCCCC26":l.value&&l.value.lightColor?l.value.lightColor+"26":"CCCCCC26");return U(()=>{var a;return(a=t.curQueueItem)==null?void 0:a.queue_item_id},()=>{var a;(a=t.curQueueItem)!=null&&a.media_item?m.src=De(t.curQueueItem.media_item,Le.THUMB)||"":t.curQueueItem?m.src=De(t.curQueueItem,Le.THUMB)||"":m.src=""}),(a,o)=>{const n=Pt("breakpoint");return s(),_(q,null,[f("div",{class:K(`${a.useFloatingPlayer?"mediacontrols-bg-2":"mediacontrols-bg-1"}`),style:B(`background: ${i.value};`)},null,6),e($)("bp3")?Ne((s(),k(_e,{key:0,color:a.$vuetify.theme.current.dark?l.value.lightColor||"#fff":l.value.darkColor||"#000","is-progress-bar":!0},null,8,["color"])),[[n,{breakpoint:"bp3",condition:"lt"}]]):w("",!0),f("div",{class:"mediacontrols",style:B(`padding: ${e($)({breakpoint:"phone"})?3:10}px ${e($)({breakpoint:"phone"}),10}px;`)},[f("div",{class:K(`mediacontrols-left-${e($)("bp3")?"1":"2"}`)},[c(Bi,{"show-quality-details-btn":!!e($)("bp8"),"show-only-artist":!e($)("bp7"),"color-palette":l.value,"primary-color":a.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])],2),f("div",{class:K(`mediacontrols-bottom-center-${e($)("bp3")?"1":"2"}`)},[f("div",Ti,[c(ae,{"visible-components":{repeat:{isVisible:e($)("bp3")},shuffle:{isVisible:e($)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"}},previous:{isVisible:e($)("bp3")},next:{isVisible:e($)("bp3")}}},null,8,["visible-components"]),Ne(c(_e,{color:a.$vuetify.theme.current.dark?l.value.lightColor||"#fff":l.value.darkColor||"#000","is-progress-bar":!1},null,8,["color"]),[[n,{breakpoint:"mobile",condition:"gt"}]])])],2),f("div",zi,[f("div",null,[c(oe,{queue:{isVisible:e($)("bp3"),color:a.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:a.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!0,color:a.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),c(ae,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e($)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"48px",staticHeight:"48px",color:a.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],4)],64)}}});const Li=W(Ni,[["__scopeId","data-v-30d32c2a"]]);const Di=se({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Ke(),...ne(),...Je(),...it(),...Xe(),...Ve({tag:"footer"}),...be()},"VFooter"),Mi=re()({name:"VFooter",props:Di(),setup(r,l){let{slots:m}=l;const{themeClasses:i}=Ue(r),{backgroundColorClasses:a,backgroundColorStyles:o}=et(G(r,"color")),{borderClasses:n}=Ze(r),{elevationClasses:y}=tt(r),{roundedClasses:g}=lt(r),p=Ct(32),{resizeRef:h}=At(C=>{C.length&&(p.value=C[0].target.clientHeight)}),u=I(()=>r.height==="auto"?p.value:parseInt(r.height,10)),{layoutItemStyles:d}=ot({id:r.name,order:I(()=>parseInt(r.order,10)),position:I(()=>"bottom"),layoutSize:u,elementSize:I(()=>r.height==="auto"?void 0:u.value),active:I(()=>r.app),absolute:G(r,"absolute")});return ue(()=>c(r.tag,{ref:h,class:["v-footer",i.value,a.value,n.value,y.value,g.value,r.class],style:[o.value,r.app?d.value:{height:pe(r.height)},r.style]},m)),{}}}),qi=Q({__name:"Footer",setup(r){const l=I(()=>t.navigationMenuStyle=="horizontal"),m=I(()=>t.navigationMenuStyle!="horizontal"?0:t.isInStandaloneMode?100:80),i=I(()=>l.value?m.value+5:0);return(a,o)=>(s(),_(q,null,[f("div",{class:K(a.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:B(`
      position: fixed;
      width: 100%;
      height: ${m.value+(e($)("bp3")?110:80)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6),e(t).navigationMenuStyle=="horizontal"?(s(),k(bl,{key:0,height:m.value},null,8,["height"])):w("",!0),c(Mi,{bottom:"",fixed:"",class:K(`d-flex flex-column ${l.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:B(`bottom: ${i.value}px;`),elevation:"15",app:""},{default:v(()=>[c(Li,{"use-floating-player":l.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}});const Fi={key:0,class:"text-body-2",style:{"line-height":"1em"}},Wi={key:1,class:"text-body-2",style:{"line-height":"1em"}},Ai={key:2,class:"text-body-2",style:{"line-height":"1em"}},Ri=Q({__name:"PlayerSelect",setup(r){const l=x(void 0),m=I(()=>{var h,u;const p=[];for(const d in(h=b)==null?void 0:h.players){const C=(u=b)==null?void 0:u.players[d];n(C,!0)&&p.push(C)}return p.slice().sort((d,C)=>{var V;return d.display_name.toUpperCase()>((V=C.display_name)==null?void 0:V.toUpperCase())?1:-1})});U(()=>t.showPlayersMenu,p=>{p||(l.value=void 0)}),U(()=>t.selectedPlayer,p=>{p&&localStorage.setItem("mass.LastPlayerId",p.player_id)}),U(()=>b.players,p=>{p&&y()},{deep:!0}),U(()=>b.state,p=>{p.value!=Oe.CONNECTED&&(t.selectedPlayerId=void 0)},{deep:!0});const i=x(),a=x();he(()=>{var p,h,u;i.value=(u=(h=(p=Vt())==null?void 0:p.vnode)==null?void 0:h.el)==null?void 0:u.getRootNode(),y()});const o=function(p){a.value!=p&&(a.value=p,setTimeout(()=>{var u;const h=(u=i.value)==null?void 0:u.getElementById(p);h==null||h.scrollIntoView({behavior:"smooth"})},0))},n=function(p,h=!0,u=!1,d=!1){return!(!p.enabled||!p.available&&!h||p.synced_to&&!u||p.hidden&&!d)},y=function(){if(t.selectedPlayer&&n(t.selectedPlayer,!1,!1,!1))return;const p=g();p&&(t.selectedPlayerId=p.player_id,console.log("Selected new default player: ",p.display_name))},g=function(){var h,u,d,C;const p=localStorage.getItem("mass.LastPlayerId");if(p&&p in b.players&&n(b.players[p],!1,!1,!1))return b.players[p];if((h=b)!=null&&h.players){for(const V in(u=b)==null?void 0:u.players){const z=b.players[V];if(z.state==He.PLAYING)return z}for(const V in(d=b)==null?void 0:d.queues){const z=b.queues[V];if(n(b.players[V],!1,!1,!1)&&z.items)return b.players[V]}for(const V in(C=b)==null?void 0:C.queues)if(n(b.players[V],!1,!1,!1))return b.players[V]}};return(p,h)=>(s(),k(xt,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":h[1]||(h[1]=u=>e(t).showPlayersMenu=u),location:"right",app:"",clipped:"",temporary:"",touchless:"",width:"290",style:{"z-index":"9999"}},{default:v(()=>[c(tl,{class:"title"},{default:v(()=>[f("b",null,P(p.$t("players")),1)]),_:1}),c(jt,{modelValue:l.value,"onUpdate:modelValue":h[0]||(h[0]=u=>l.value=u),focusable:"",variant:"accordion",flat:""},{default:v(()=>[(s(!0),_(q,null,M(m.value,u=>(s(),k(Yt,{id:u.player_id,key:u.player_id,disabled:!u.available,flat:"",class:"playerrow"},{default:v(()=>[c(Kt,{"expand-icon":"mdi-chevron-down","collapse-icon":"mdi-chevron-up",onClick:d=>{e(t).selectedPlayerId=u.player_id,o(u.player_id)}},{default:v(()=>[c(O,{class:"playerrow-list-item"},{prepend:v(()=>[c(S,{size:"45",icon:u.icon,color:"primary"},null,8,["icon"])]),title:v(()=>[f("div",null,[f("b",null,P(e(ge)(e(Ee)(u),20)),1)])]),subtitle:v(()=>[u.powered?u.active_source!=u.player_id&&e(b).queues[u.active_source]?(s(),_("div",Wi,P(p.$t("state."+u.state))+" ("+P(e(b).queues[u.active_source].display_name)+") ",1)):(s(),_("div",Ai,P(p.$t("state."+u.state)),1)):(s(),_("div",Fi,P(p.$t("state.off")),1))]),_:2},1024)]),_:2},1032,["onClick"]),c(Jt,null,{default:v(()=>[c(mt,{player:u},null,8,["player"])]),_:2},1024)]),_:2},1032,["id","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}});const Hi=W(Ri,[["__scopeId","data-v-4221875e"]]);function Ei(r={}){const{immediate:l=!1,onNeedRefresh:m,onOfflineReady:i,onRegistered:a,onRegisteredSW:o,onRegisterError:n}=r;let y,g,p;const h=async(d=!0)=>{await g,await(p==null?void 0:p())};async function u(){if("serviceWorker"in navigator){if(y=await wt(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[],import.meta.url).then(({Workbox:d})=>new d("./sw.js",{scope:"./",type:"classic"})).catch(d=>{n==null||n(d)}),!y)return;p=async()=>{await(y==null?void 0:y.messageSkipWaiting())};{let d=!1;const C=()=>{d=!0,y==null||y.addEventListener("controlling",V=>{V.isUpdate&&window.location.reload()}),m==null||m()};y.addEventListener("installed",V=>{typeof V.isUpdate>"u"?typeof V.isExternal<"u"?V.isExternal?C():!d&&(i==null||i()):V.isExternal?window.location.reload():!d&&(i==null||i()):V.isUpdate||i==null||i()}),y.addEventListener("waiting",C),y.addEventListener("externalwaiting",C)}y.register({immediate:l}).then(d=>{o?o("./sw.js",d):a==null||a(d)}).catch(d=>{n==null||n(d)})}}return g=u(),h}function Ui(r={}){const{immediate:l=!0,onNeedRefresh:m,onOfflineReady:i,onRegistered:a,onRegisteredSW:o,onRegisterError:n}=r,y=x(!1),g=x(!1);return{updateServiceWorker:Ei({immediate:l,onNeedRefresh(){y.value=!0,m==null||m()},onOfflineReady(){g.value=!0,i==null||i()},onRegistered:a,onRegisteredSW:o,onRegisterError:n}),offlineReady:g,needRefresh:y}}const Oi={key:0,class:"pwa-toast",role:"alert"},Gi={class:"message"},ji={key:0},Yi={key:1},Ki=Q({__name:"ReloadPrompt",setup(r){const{offlineReady:l,needRefresh:m,updateServiceWorker:i}=Ui(),a=async()=>{l.value=!1,m.value=!1};return(o,n)=>e(l)||e(m)?(s(),_("div",Oi,[f("div",Gi,[e(l)?(s(),_("span",ji," App ready to work offline ")):(s(),_("span",Yi," New content available, click on reload button to update. "))]),e(m)?(s(),_("button",{key:0,onClick:n[0]||(n[0]=y=>e(i)())},"Reload")):w("",!0),f("button",{onClick:a},"Close")])):w("",!0)}});const Ji=se({...ne(),...Ut({fullHeight:!0}),...be()},"VApp"),Xi=re()({name:"VApp",props:Ji(),setup(r,l){let{slots:m}=l;const i=Ue(r),{layoutClasses:a,getLayoutItem:o,items:n,layoutRef:y}=Ot(r),{rtlClasses:g}=$t();return ue(()=>{var p;return c("div",{ref:y,class:["v-application",i.themeClasses.value,a.value,g.value,r.class],style:[r.style]},[c("div",{class:"v-application__wrap"},[(p=m.default)==null?void 0:p.call(m)])])}),{getLayoutItem:o,items:n,theme:i}}}),Co=Q({__name:"Default",setup(r){return(l,m)=>(s(),k(Xi,null,{default:v(()=>[c(Hi),e(b).state.value==e(Oe).CONNECTED?(s(),k(pl,{key:0})):(s(),k(Gt,{key:1},{default:v(()=>[c(Rt,{indeterminate:"",size:"64"})]),_:1})),e(t).isInStandaloneMode?(s(),k(Ki,{key:2})):w("",!0),c(qi)]),_:1}))}});export{Co as default};
