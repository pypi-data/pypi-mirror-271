import{l as ee,m as te,f as t,d as j,r as F,c as l,g as u,w as i,E as O,O as U,Q as ie,L as ae,aj as le,af as oe,ae as ne,I as se,z as P,b as C,e as g,j as y,u as c,i as k,G as I,t as f,F as z,h as D,ac as R,a3 as Y,s as A,M as B,ak as re,V as me,al as de,N as ue,D as pe}from"./index-1fa25223.js";import{_ as Q,C as ce}from"./Container-55c3ff81.js";import{M as H,g as G,c as fe}from"./helpers-f9fbf435.js";import{m as ye,u as ge,t as L,o as V,q as W,v as K,V as q,p as ve}from"./VListItem-53d44b85.js";import{V as he}from"./VMenu-85495654.js";import{g as be,a as ke}from"./ItemContextMenu.vue_vue_type_style_index_0_scoped_be40882c_lang-79825e42.js";import{T as J}from"./Toolbar-77a90b60.js";import{V as _e,a as Ve}from"./VCardText-bbb7eb1a.js";import{a as w,V as x,b as $e}from"./VCard-99bbc2f5.js";import{V as Ce}from"./VTooltip-c87f5f44.js";import{a as N,V as X}from"./VList-f519ecda.js";import{V as we}from"./VSelect-58338ce7.js";import{b as Ie,c as Le}from"./layout-6738e727.js";import{V as Te}from"./VDialog-0a55bc34.js";import{V as Pe}from"./VLabel-148b546a.js";import{_ as ze}from"./_plugin-vue_export-helper-c27b6911.js";import{L as De}from"./ListItem-9f85535e.js";const Re=ee({...ye(),...Ie()},"VLayout"),Be=te()({name:"VLayout",props:Re(),setup(_,m){let{slots:d}=m;const{layoutClasses:b,layoutStyles:p,getLayoutItem:o,items:r,layoutRef:v}=Le(_);return ge(()=>{var n;return t("div",{ref:v,class:[b.value,_.class],style:[p.value,_.style]},[(n=d.default)==null?void 0:n.call(d)])}),{getLayoutItem:o,items:r}}}),Se=j({__name:"MenuButton",props:{icon:{default:void 0},text:{default:void 0},disabled:{type:Boolean,default:!1},width:{default:200}},emits:["click"],setup(_,{emit:m}){const d=F(!1),b=m;return(p,o)=>(l(),u("div",{style:U(`width: ${p.width}px; height: 30px`)},[t(he,{modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=r=>d.value=r),"close-on-content-click":!0,"nudge-width":200,"offset-x":"",scrim:"true"},{activator:i(({props:r})=>[t(L,O({variant:"tonal",disabled:p.disabled},r,{style:`
            width: ${p.width}px;
            position: absolute;
            border: 1px solid #cccccc4d;
            height: 38px;
            margin-top: -1px;
            margin-left: -1px;
          `}),{default:i(()=>[t(V,{icon:"mdi-menu-down",size:"xx-large",style:U(`width: 20px; margin-left: ${p.width-42}px`)},null,8,["style"])]),_:2},1040,["disabled","style"])]),default:i(()=>[ie(p.$slots,"menu")]),_:3},8,["modelValue"]),t(L,{color:"primary",flat:"",disabled:p.disabled,style:U(`width: ${p.width-40}px; justify-content: left`),text:p.text,onClick:o[1]||(o[1]=r=>b("click"))},ae({_:2},[p.icon?{name:"prepend",fn:i(()=>[t(V,{icon:p.icon,size:"x-large"},null,8,["icon"])]),key:"0"}:void 0]),1032,["disabled","style","text"])],4))}}),Ue={key:0,xs5:"","pa-5":"",style:{height:"80%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center"}},Ae={key:0},He={key:1},xe={style:{"padding-bottom":"10px"}},Fe=["onClick"],Ne={style:{color:"primary"}},je={style:{display:"flex","margin-left":"14px","padding-bottom":"10px"}},Ee=["innerHTML"],Ye={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Ge=j({__name:"InfoHeader",props:{item:{}},setup(_){const m=_,d=F(!1),b=F(),{mobile:p}=le(),o=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,r=oe();ne(),se(()=>m.item,async e=>{e&&(b.value=G(m.item,Y.FANART)||G(m.item,Y.THUMB)||o)},{immediate:!0});const v=function(e){r.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},n=function(e){r.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},S=function(){var s;if(A.prevScrollPos){r.go(-1);return}const e=((s=r.currentRoute.value.name)==null?void 0:s.toString())||"";for(const a of["artist","album","track","playlist","radio"])if(e.includes(a)){r.push({name:`${a}s`});return}r.push({name:"home"})},T=P(()=>m.item?m.item.metadata&&m.item.metadata.description?m.item.metadata.description:m.item.metadata&&m.item.metadata.copyright?m.item.metadata.copyright:("artists"in m.item&&m.item.artists.forEach(function(e){if("metadata"in e&&e.metadata.description)return e.metadata.description}),""):""),Z=P(()=>T.value.replace(/(\r\n|\n|\r)/gm,"<br /><br />")),E=P(()=>{const e=p.value?160:300;return T.value.length>e?T.value.replace(/(\r\n|\n|\r)/gm," ").substring(0,e)+"...":T.value.replace(/(\r\n|\n|\r)/gm," ")}),M=P(()=>{var s,a;const e=[];for(const h in(s=C)==null?void 0:s.players){const $=(a=C)==null?void 0:a.players[h];$.synced_to||e.push({title:$.display_name,value:$.player_id})}return e.slice().sort((h,$)=>h.title.toUpperCase()>$.title.toUpperCase()?1:-1)});return(e,s)=>(l(),u("div",null,[t(x,{variant:"flat",img:c(o),style:{"z-index":"0","border-radius":"0px"},height:"25vh","max-height":"500px","min-height":"340px"},{default:i(()=>[e.item?y("",!0):(l(),g(ve,{key:0,indeterminate:""})),t(W,{width:"100%",height:"100%",cover:"",class:"background-image",src:b.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),t(J,{icon:"mdi-arrow-left",style:{position:"absolute"},"menu-items":e.item?c(be)([e.item],e.item):[],"enforce-overflow-menu":!0,onIconClicked:S},null,8,["menu-items"]),e.item?(l(),g(Be,{key:1,style:{margin:"0",top:"55%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:i(()=>[e.$vuetify.display.mobile?y("",!0):(l(),u("div",Ue,[e.item.media_type&&[c(B).ARTIST,c(B).PLAYLIST].includes(e.item.media_type)?(l(),u("div",Ae,[t(K,{size:"210",style:{"margin-bottom":"10%"}},{default:i(()=>[t(H,{item:e.item},null,8,["item"])]),_:1})])):(l(),u("div",He,[t(H,{item:e.item,size:"calc(100%)",style:{"max-height":"256px"}},null,8,["item"])]))])),k("div",null,[t(_e,null,{default:i(()=>[I(f(e.item.name),1)]),_:1}),k("div",xe,["version"in e.item&&e.item.version?(l(),g(w,{key:0,class:"caption"},{default:i(()=>[I(f(e.item.version)+" ",1),t(Ce,{location:"bottom"},{activator:i(({props:a})=>[c(re)(e.item.metadata.explicit||!1)?(l(),g(V,O({key:0},a,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):y("",!0)]),default:i(()=>[k("span",null,f(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):y("",!0),"artists"in e.item&&e.item.artists?(l(),g(w,{key:1,class:"title accent--text"},{default:i(()=>[t(V,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(l(!0),u(z,null,D(e.item.artists,(a,h)=>(l(),u("span",{key:a.item_id},[k("a",{style:{color:"accent"},onClick:$=>n(a)},f(a.name),9,Fe),h+1<e.item.artists.length?(l(),u("span",{key:h,style:{color:"accent"}},f(" / "))):y("",!0)]))),128))]),_:1})):y("",!0),"owner"in e.item&&e.item.owner?(l(),g(w,{key:2,class:"title"},{default:i(()=>[t(V,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),k("a",Ne,f(e.item.owner),1)]),_:1})):y("",!0),"album"in e.item&&e.item.album?(l(),g(w,{key:3},{default:i(()=>[t(V,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),k("a",{style:{color:"secondary"},onClick:s[0]||(s[0]=a=>{var h;return v((h=e.item)==null?void 0:h.album)})},f(e.item.album.name),1)]),_:1})):y("",!0)]),k("div",je,[t(Se,{width:200,icon:"mdi-play-circle-outline",text:c(me)(e.$t("play"),12),onClick:s[3]||(s[3]=a=>c(C).playMedia(e.item))},{menu:i(()=>[t(x,{width:"320"},{default:i(()=>[t(N,null,{default:i(()=>[t(q,{title:e.item.name},{prepend:i(()=>[t(K,null,{default:i(()=>[t(H,{item:e.item,size:"80"},null,8,["item"])]),_:1})]),title:i(()=>[t(we,{variant:"plain",label:e.$t("play_on"),"model-value":c(A).selectedPlayerId,"hide-details":"",items:M.value,onClick:s[1]||(s[1]=R(()=>{},["stop"])),"onUpdate:modelValue":s[2]||(s[2]=a=>{c(A).selectedPlayerId=a})},null,8,["label","model-value","items"])]),_:1},8,["title"])]),_:1}),t(X),t(N,{density:"compact",slim:"",tile:""},{default:i(()=>[(l(!0),u(z,null,D(c(ke)([e.item],e.item),a=>(l(),u("div",{key:a.label},[t(q,{title:e.$t(a.label,a.labelArgs||[]),density:"compact",onClick:a.action},{prepend:i(()=>[t(V,{style:{"padding-left":"15px"},icon:a.icon},null,8,["icon"])]),_:2},1032,["title","onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["text"]),t(L,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[s[4]||(s[4]=a=>c(C).toggleFavorite(e.item)),s[5]||(s[5]=R(()=>{},["prevent"])),s[6]||(s[6]=R(()=>{},["stop"]))]},null,8,["icon","title"]),t(Q,{domain:e.item.provider,size:25,style:{"margin-top":"4px"}},null,8,["domain"])]),E.value?(l(),g(w,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:s[7]||(s[7]=a=>d.value=!d.value)},{default:i(()=>[k("div",{innerHTML:E.value},null,8,Ee)]),_:1})):y("",!0),e.item&&e.item.metadata.genres?(l(),u("div",Ye,[(l(!0),u(z,null,D(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),a=>(l(),g(Pe,{key:a,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:i(()=>[I(f(a),1)]),_:2},1024))),128))])):y("",!0)])]),_:1})):y("",!0)]),_:1},8,["img"]),t(Te,{modelValue:d.value,"onUpdate:modelValue":s[9]||(s[9]=a=>d.value=a),"max-width":"975",width:"auto"},{default:i(()=>[t(x,null,{default:i(()=>[t(Ve,{innerHTML:Z.value},null,8,["innerHTML"]),t($e,null,{default:i(()=>[t(L,{color:"primary",block:"",onClick:s[8]||(s[8]=a=>d.value=!1)},{default:i(()=>[I(f(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});const pt=ze(Ge,[["__scopeId","data-v-559389a4"]]),Ke={style:{"margin-bottom":"10px"}},qe={key:0},Oe=["title","onClick"],Qe=["title"],ct=j({__name:"ProviderDetails",props:{itemDetails:{}},setup(_){const m=function(o){window.open(o,"_blank")},d=de({}),b=function(o){const r=`${o.provider_instance}.${o.item_id}`,v=d[r];if(v)v.load(),delete d[r];else{const n=new Audio(p(o.provider_instance,o.item_id));d[r]=n,n.play()}},p=function(o,r){return`${C.baseUrl}/preview?item_id=${encodeURIComponent(r)}&provider=${o}`};return(o,r)=>(l(),u("section",Ke,[t(J,{title:o.$t("mapped_providers")},null,8,["title"]),t(X),t(ce,null,{default:i(()=>[t(N,null,{default:i(()=>{var v;return[(l(!0),u(z,null,D((v=o.itemDetails)==null?void 0:v.provider_mappings,n=>(l(),g(De,{key:n.provider_instance},{prepend:i(()=>[t(Q,{domain:n.provider_domain,size:30},null,8,["domain"])]),title:i(()=>[I(f(c(C).providerManifests[n.provider_domain].name),1)]),subtitle:i(()=>[o.itemDetails.media_type==c(B).TRACK&&n.audio_format?(l(),u("span",qe,f(n.audio_format.content_type)+" | "+f(n.audio_format.sample_rate/1e3)+"kHz/"+f(n.audio_format.bit_depth)+" bits | ",1)):y("",!0),n.url&&!n.provider_domain.startsWith("file")?(l(),u("a",{key:1,style:{opacity:"0.4"},title:o.$t("tooltip.open_provider_link"),onClick:R(S=>m(n.url),["prevent"])},f(n.url),9,Oe)):(l(),u("span",{key:2,style:{opacity:"0.4"},title:n.item_id},f(n.item_id),9,Qe))]),append:i(()=>[n.audio_format&&n.audio_format.bit_depth>16?(l(),g(W,{key:0,src:c(fe),width:"30",class:ue(o.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):y("",!0),c(pe)("bp1")&&o.itemDetails.media_type==c(B).TRACK?(l(),g(L,{key:1,icon:d[`${n.provider_instance}.${n.item_id}`]?"mdi-pause":"mdi-play-circle",title:o.$t("tooltip.play_sample"),onClick:S=>b(n)},null,8,["icon","title","onClick"])):y("",!0)]),_:2},1024))),128))]}),_:1})]),_:1})]))}});export{pt as I,ct as _};
