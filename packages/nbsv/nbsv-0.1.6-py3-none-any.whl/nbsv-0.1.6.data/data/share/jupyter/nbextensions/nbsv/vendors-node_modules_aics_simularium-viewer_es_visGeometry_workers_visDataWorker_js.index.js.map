{"version":3,"file":"vendors-node_modules_aics_simularium-viewer_es_visGeometry_workers_visDataWorker_js.index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAA8D;AACM;AACsB;AACtB;AACc;AAC1B;AACc;AACF;AACpE,+BAA+B,WAAW,iFAAe,KAAK,4FAA0B,gEAAgE,iFAAe;AACvK,uCAAuC,MAAM,qFAAqF,MAAM,aAAa,2EAA2E,aAAa;AACtO;AACP;AACA;AACA;AACA;AACA,CAAC,GAAG;AACG;AACP,EAAE,2EAAS;AACX;AACA;AACA;AACA;AACA,IAAI,iFAAe;AACnB,6FAA6F,aAAa;AAC1G;AACA;AACA;AACA;AACA,IAAI,iFAAe,CAAC,wFAAsB;AAC1C,IAAI,iFAAe,CAAC,wFAAsB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,8EAAY;AACrB,CAAC,eAAe,kFAAgB;;;;;;;;;;;;;;;;ACrCY;AACgB;AAC5D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qDAAiB;AAC3C;AACA,KAAK;AACL;AACA;AACA;AACA,YAAY,qDAAiB;AAC7B,gBAAgB,qDAAiB;AACjC;AACA,UAAU;AACV;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,wBAAwB,qDAAiB,sBAAsB;AAC/D;AACA,+BAA+B,qDAAiB;AAChD;AACA,SAAS;AACT;AACA,kBAAkB,yDAAa,uDAAuD,sDAAU;AAChG;AACA,6DAA6D;AAC7D,oCAAoC,qDAAiB;AACrD,gCAAgC,qDAAiB;AACjD;AACA,SAAS;AACT;AACA,kBAAkB,yDAAa,kFAAkF,sDAAU;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACvFA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEO;AACA;AACP;AACO;AACP;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;ACnBe;AACf;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACLe;AACf;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACJiD;AACoB;AACtD;AACf,MAAM,wEAAwB;AAC9B;AACA;AACA;AACA,cAAc,8DAAc;AAC5B;;;;;;;;;;;;;;;ACR+C;AAC/C;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA,kCAAkC,6DAAa;AAC/C;AACA;AACe;AACf;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;;;;ACjB+C;AAChC;AACf,QAAQ,6DAAa;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;;;;;;;;;;;;;;ACde;AACf;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACLiD;AAClC;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH,kBAAkB,8DAAc;AAChC;;;;;;;;;;;;;;AChBe;AACf;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;;;;ACNe;AACf;AACA,yFAAyF;AACzF,IAAI;AACJ;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;;;;ACPkC;AAC6B;AAChD;AACf,eAAe,sDAAO;AACtB;AACA,IAAI;AACJ;AACA;AACA,SAAS,qEAAqB;AAC9B;;;;;;;;;;;;;;ACTe;AACf;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACNkC;AACnB;AACf,kBAAkB,sDAAO;AACzB;AACA;AACA;AACA,oBAAoB,sDAAO;AAC3B;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACVkC;AACS;AAC5B;AACf,UAAU,2DAAW;AACrB,qBAAqB,sDAAO;AAC5B;;;;;;;;;;;;;;ACLe;AACf;;AAEA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;;;;;;;;;;;;;;;;;;ACRiD;AACA;AACI;AACd;AACxB;AACf;AACA;AACA,2BAA2B,gEAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,yDAAS,mBAAmB,8DAAc;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,WAAW,8DAAc;AACzB;AACA;AACA;;;;;;UC7BA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;ACNoE;AACpE;AACA;AACA,6BAA6B,6EAAmB;AAChD;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,S","sources":["webpack://nbsv/./node_modules/@aics/simularium-viewer/es/simularium/FrontEndError.js","webpack://nbsv/./node_modules/@aics/simularium-viewer/es/simularium/VisDataParse.js","webpack://nbsv/./node_modules/@aics/simularium-viewer/es/simularium/types.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://nbsv/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://nbsv/webpack/bootstrap","webpack://nbsv/webpack/runtime/define property getters","webpack://nbsv/webpack/runtime/hasOwnProperty shorthand","webpack://nbsv/webpack/runtime/make namespace object","webpack://nbsv/./node_modules/@aics/simularium-viewer/es/visGeometry/workers/visDataWorker.js"],"sourcesContent":["import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/wrapNativeSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nexport var ErrorLevel = /*#__PURE__*/function (ErrorLevel) {\n  ErrorLevel[\"ERROR\"] = \"error\";\n  ErrorLevel[\"INFO\"] = \"info\";\n  ErrorLevel[\"WARNING\"] = \"warning\";\n  return ErrorLevel;\n}({});\nexport var FrontEndError = /*#__PURE__*/function (_Error) {\n  _inherits(FrontEndError, _Error);\n  function FrontEndError(message) {\n    var _this;\n    var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ErrorLevel.ERROR;\n    var htmlData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n    _classCallCheck(this, FrontEndError);\n    for (var _len = arguments.length, params = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n      params[_key - 3] = arguments[_key];\n    }\n    // Pass remaining arguments (including vendor specific ones) to parent constructor\n    _this = _callSuper(this, FrontEndError, [].concat(params));\n    _defineProperty(_assertThisInitialized(_this), \"htmlData\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"level\", void 0);\n    _this.name = \"FrontEndError\";\n    _this.message = message;\n    _this.htmlData = htmlData;\n    _this.level = level;\n    return _this;\n  }\n  return _createClass(FrontEndError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));","import { AGENT_OBJECT_KEYS } from \"./types\";\nimport { FrontEndError, ErrorLevel } from \"./FrontEndError\";\n/**\n *   Parses a stream of data sent from the backend\n *\n *   To minimize bandwidth, traits/objects are not packed\n *   1-1; what arrives is an array of float values\n *\n *   For instance for:\n *   entity = (\n *        trait1 : 4,\n *        trait2 : 5,\n *        trait3 : 6,\n *    ) ...\n *\n *   what arrives will be:\n *       [...,4,5,6,...]\n *\n *   The traits are assumed to be variable in length,\n *   and the alorithm to decode them needs to the reverse\n *   of the algorithm that packed them on the backend\n *\n *   This is more convuluted than sending the JSON objects themselves,\n *   however these frames arrive multiple times per second. Even a naive\n *   packing reduces the packet size by ~50%, reducing how much needs to\n *   paid for network bandwith (and improving the quality & responsiveness\n *   of the application, since network latency is a major bottle-neck)\n * */\n\nfunction parseVisDataMessage(visDataMsg) {\n  var parsedAgentDataArray = [];\n  var frameDataArray = [];\n  visDataMsg.bundleData.forEach(function (frame) {\n    var visData = frame.data;\n    var parsedAgentData = [];\n    var nSubPointsIndex = AGENT_OBJECT_KEYS.findIndex(function (ele) {\n      return ele === \"nSubPoints\";\n    });\n    var parseOneAgent = function parseOneAgent(agentArray) {\n      return agentArray.reduce(function (agentData, cur, i) {\n        var key;\n        if (AGENT_OBJECT_KEYS[i]) {\n          key = AGENT_OBJECT_KEYS[i];\n          agentData[key] = cur;\n        } else if (i < agentArray.length + agentData.nSubPoints) {\n          agentData.subpoints.push(cur);\n        }\n        return agentData;\n      }, {\n        subpoints: []\n      });\n    };\n    var _loop = function _loop() {\n      var nSubPoints = visData[nSubPointsIndex];\n      var chunkLength = AGENT_OBJECT_KEYS.length + nSubPoints; // each array length is variable based on how many subpoints the agent has\n      if (visData.length < chunkLength) {\n        var attemptedMapping = AGENT_OBJECT_KEYS.map(function (name, index) {\n          return \"\".concat(name, \": \").concat(visData[index], \"<br />\");\n        });\n        // will be caught by controller.changeFile(...).catch()\n        throw new FrontEndError(\"Your data is malformed, there are too few entries.\", ErrorLevel.ERROR, \"Example attempt to parse your data: <pre>\".concat(attemptedMapping.join(\"\"), \"</pre>\"));\n      }\n      var agentSubSetArray = visData.splice(0, chunkLength); // cut off the array of 1 agent data from front of the array;\n      if (agentSubSetArray.length < AGENT_OBJECT_KEYS.length) {\n        var _attemptedMapping = AGENT_OBJECT_KEYS.map(function (name, index) {\n          return \"\".concat(name, \": \").concat(agentSubSetArray[index], \"<br />\");\n        });\n        // will be caught by controller.changeFile(...).catch()\n        throw new FrontEndError(\"Your data is malformed, there are less entries than expected for this agent. \", ErrorLevel.ERROR, \"Example attempt to parse your data: <pre>\".concat(_attemptedMapping.join(\"\"), \"</pre>\"));\n      }\n      var agent = parseOneAgent(agentSubSetArray);\n      parsedAgentData.push(agent);\n    };\n    while (visData.length) {\n      _loop();\n    }\n    var frameData = {\n      time: frame.time,\n      frameNumber: frame.frameNumber\n    };\n    parsedAgentDataArray.push(parsedAgentData);\n    frameDataArray.push(frameData);\n  });\n  return {\n    parsedAgentDataArray: parsedAgentDataArray,\n    frameDataArray: frameDataArray\n  };\n}\nexport { parseVisDataMessage };","// TODO: see proposed new NetMessage data type\n//       Remove msgType and fileName from this data structure\n//       Then this data structure appears as a payload of the NetMessage\n\n// TODO: see proposed new NetMessage data type\n//       Remove msgType and connId from this data structure.\n//       Then this data structure appears as a payload of the NetMessage\n\n// This should always point to the latest version\n\nexport var FILE_STATUS_SUCCESS = \"success\";\nexport var FILE_STATUS_FAIL = \"fail\";\n// IMPORTANT: Order of this array needs to perfectly match the incoming data.\nexport var AGENT_OBJECT_KEYS = [\n// TODO: convert \"vis-type\" to visType at parse time\n\"vis-type\", \"instanceId\", \"type\", \"x\", \"y\", \"z\", \"xrot\", \"yrot\", \"zrot\", \"cr\", \"nSubPoints\"];\n\n/**\n * Parse Agents from Net Data\n * */","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(t, e, r) {\n  if (isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n  var o = [null];\n  o.push.apply(o, e);\n  var p = new (t.bind.apply(t, o))();\n  return r && setPrototypeOf(p, r.prototype), p;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _isNativeFunction(fn) {\n  try {\n    return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n  } catch (e) {\n    return typeof fn === \"function\";\n  }\n}","export default function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { parseVisDataMessage } from \"../../simularium/VisDataParse\";\nself.addEventListener(\"message\", function (e) {\n  var visDataMsg = e.data;\n  var _parseVisDataMessage = parseVisDataMessage(visDataMsg),\n    frameDataArray = _parseVisDataMessage.frameDataArray,\n    parsedAgentDataArray = _parseVisDataMessage.parsedAgentDataArray;\n  postMessage({\n    frameDataArray: frameDataArray,\n    parsedAgentDataArray: parsedAgentDataArray\n  });\n}, false);"],"names":[],"sourceRoot":""}