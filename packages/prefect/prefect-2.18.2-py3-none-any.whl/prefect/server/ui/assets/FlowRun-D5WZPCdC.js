import{d as F,f as b,e as f,o,l as $,I as g,m as v,u as e,af as z,c as u,ag as J,a as i,ah as L,ai as Q,aj as W,ak as q,al as G,W as H,am as K,an as M,Q as Z,ao as X,ap as Y,aq as ee,ar as ae,g as r,h as y,a1 as le,as as se,at as te,au as ne,av as oe,aw as ue,ax as re,ay as ie,az as fe,aA as de,aB as ce,aC as T,v as pe,ae as C,aD as ve}from"./index-DbqzL2G0.js";import{u as we}from"./usePageTitle-DXbXnued.js";const me={class:"flow-run-graphs__graph-panel-container"},_e={class:"flow-run-graphs__graphs"},ke={class:"flow-run-graphs__panel p-background"},be=F({__name:"FlowRunGraphs",props:{flowRun:{}},setup(I){const m=b(),c=b(!1),l=b(null),a=f(()=>{var p,s;return{root:{"flow-run-graphs--fullscreen":c.value,"flow-run-graphs--show-panel":((p=l.value)==null?void 0:p.kind)==="task-run"||((s=l.value)==null?void 0:s.kind)==="flow-run"}}});return(p,s)=>{var _,d,w;return o(),$("div",{class:q(["flow-run-graphs",a.value.root])},[g("div",me,[g("div",_e,[v(e(z),{fullscreen:c.value,"onUpdate:fullscreen":s[0]||(s[0]=n=>c.value=n),viewport:m.value,"onUpdate:viewport":s[1]||(s[1]=n=>m.value=n),selected:l.value,"onUpdate:selected":s[2]||(s[2]=n=>l.value=n),"flow-run":p.flowRun,class:"flow-run-graphs__flow-run"},null,8,["fullscreen","viewport","selected","flow-run"])]),g("div",ke,[((_=l.value)==null?void 0:_.kind)==="task-run"||((d=l.value)==null?void 0:d.kind)==="flow-run"?(o(),u(e(J),{key:0,selection:l.value,"onUpdate:selection":s[3]||(s[3]=n=>l.value=n),floating:c.value},null,8,["selection","floating"])):i("",!0)])]),l.value&&l.value.kind==="artifacts"?(o(),u(e(L),{key:0,selection:l.value,"onUpdate:selection":s[4]||(s[4]=n=>l.value=n)},null,8,["selection"])):i("",!0),((w=l.value)==null?void 0:w.kind)==="state"?(o(),u(e(Q),{key:1,selection:l.value,"onUpdate:selection":s[5]||(s[5]=n=>l.value=n)},null,8,["selection"])):i("",!0),v(e(W),{selection:l.value,"onUpdate:selection":s[6]||(s[6]=n=>l.value=n)},null,8,["selection"])],2)}}}),Re=F({__name:"FlowRun",setup(I){const m=G(),c=le(),l=H("flowRunId"),{flowRun:a,subscription:p}=K(l,{interval:5e3}),s=f(()=>{var t;return(t=a.value)==null?void 0:t.deploymentId}),{deployment:_}=M(s),d=f(()=>{var t;return(t=a.value)!=null&&t.stateType?se(a.value.stateType):!0}),w=f(()=>{var t;return te(((t=a.value)==null?void 0:t.jobVariables)??{})}),n=f(()=>[{label:"Logs"},{label:"Task Runs",hidden:d.value},{label:"Subflow Runs",hidden:d.value},{label:"Results",hidden:d.value},{label:"Artifacts",hidden:d.value},{label:"Details"},{label:"Parameters"},{label:"Job Variables",hidden:!m.access.flowRunInfraOverrides}]),k=Z("tab","Logs"),{tabs:U}=X(n,k),j=f(()=>{var t;return((t=a.value)==null?void 0:t.parameters)??{}}),P=f(()=>{var t;return((t=_.value)==null?void 0:t.parameterOpenApiSchema)??{}}),R=f(()=>ne(j.value,P.value)),V=f(()=>[l.value]),{filter:B}=Y({flowRuns:{parentFlowRunId:V}});function D(){c.push(C.flowRuns())}const E=f(()=>{var t;return(t=a.value)==null?void 0:t.stateType});ee(E);const S=f(()=>a.value?`Flow Run: ${a.value.name}`:"Flow Run");return we(S),ae(()=>{p.error&&ve(p.error).isInRange("clientError")&&c.replace(C[404]())}),(t,h)=>{const x=y("p-code-highlight"),A=y("p-tabs"),N=y("p-layout-default");return o(),u(N,{class:"flow-run"},{header:r(()=>[e(a)?(o(),u(e(oe),{key:0,"flow-run-id":e(a).id,onDelete:D},null,8,["flow-run-id"])):i("",!0)]),default:r(()=>[e(a)&&!d.value?(o(),u(be,{key:0,"flow-run":e(a)},null,8,["flow-run"])):i("",!0),v(A,{selected:e(k),"onUpdate:selected":h[0]||(h[0]=O=>pe(k)?k.value=O:null),tabs:e(U)},{details:r(()=>[e(a)?(o(),u(e(ue),{key:0,"flow-run":e(a)},null,8,["flow-run"])):i("",!0)]),logs:r(()=>[e(a)?(o(),u(e(re),{key:0,"flow-run":e(a)},null,8,["flow-run"])):i("",!0)]),results:r(()=>[e(a)?(o(),u(e(ie),{key:0,"flow-run":e(a)},null,8,["flow-run"])):i("",!0)]),artifacts:r(()=>[e(a)?(o(),u(e(fe),{key:0,"flow-run":e(a)},null,8,["flow-run"])):i("",!0)]),"task-runs":r(()=>[e(a)?(o(),u(e(de),{key:0,"flow-run-id":e(a).id},null,8,["flow-run-id"])):i("",!0)]),"subflow-runs":r(()=>[v(e(ce),{filter:e(B)},null,8,["filter"])]),parameters:r(()=>[e(a)?(o(),u(e(T),{key:0,"text-to-copy":R.value},{default:r(()=>[v(x,{lang:"json",text:R.value,class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):i("",!0)]),"job-variables":r(()=>[e(a)?(o(),u(e(T),{key:0,"text-to-copy":w.value},{default:r(()=>[v(x,{lang:"json",text:w.value,class:"flow-run__job-variables"},null,8,["text"])]),_:1},8,["text-to-copy"])):i("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{Re as default};
//# sourceMappingURL=FlowRun-D5WZPCdC.js.map
