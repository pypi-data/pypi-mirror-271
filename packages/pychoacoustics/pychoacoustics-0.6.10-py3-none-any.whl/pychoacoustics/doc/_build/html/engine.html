<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The pychoacoustics Engine &mdash; pychoacoustics 0.6.10 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Writing your own Experiments" href="adding_experiments.html" />
    <link rel="prev" title="Default Experiments" href="default_experiments.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            pychoacoustics
          </a>
              <div class="version">
                0.6.10
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">What is <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code>?</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphical_user_interface.html">Graphical User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="commandline_user_interface.html">Command Line User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="paradigms.html">Paradigms</a></li>
<li class="toctree-l1"><a class="reference internal" href="result_files.html">Result Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="default_experiments.html">Default Experiments</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> Engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#sound-output">Sound Output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sound-output-on-linux">Sound Output on Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sound-output-on-windows">Sound Output on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sound-output-on-macos">Sound Output on macOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sound-output-on-freebsd">Sound Output on FreeBSD</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#parameters-files">Parameters Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#block-presentation-position">Block Presentation Position</a></li>
<li class="toctree-l2"><a class="reference internal" href="#displaying-task-instructions">Displaying Task Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#os-commands">OS Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preferences-settings">Preferences Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#response-mode">Response Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="adding_experiments.html">Writing your own Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="_autosummary/sndlib.html">sndlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="sndlib.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sndlib</span></code> – Sound Synthesis Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="_autosummary/pysdt.html">pysdt</a></li>
<li class="toctree-l1"><a class="reference internal" href="pysdt.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pysdt</span></code> – Signal Detection Theory Measures</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="fdl.html">GNU Free Documentation License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pychoacoustics</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">The <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> Engine</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/engine.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-pychoacoustics-engine">
<span id="sec-engine"></span><h1>The <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> Engine<a class="headerlink" href="#the-pychoacoustics-engine" title="Permalink to this heading"></a></h1>
<section id="sound-output">
<span id="sec-sound-output"></span><h2>Sound Output<a class="headerlink" href="#sound-output" title="Permalink to this heading"></a></h2>
<section id="sound-output-on-linux">
<h3>Sound Output on Linux<a class="headerlink" href="#sound-output-on-linux" title="Permalink to this heading"></a></h3>
<p>On Linux systems <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> can either output sound (numpy
arrays) directly to the soundcard, or write a <code class="docutils literal notranslate"><span class="pre">WAV</span></code> file for each sound
and call an external command to play it. Currently, sending
sounds directly to the soundcard is possible only through the
<a class="reference external" href="http://people.csail.mit.edu/hubert/pyaudio/">pyaudio</a> or
through the <a class="reference external" href="http://pyalsaaudio.sourceforge.net/">alsaaudio</a> (optional dependency,
Linux only) Python modules.
If these modules are installed, they will be detected automatically and you will
be able to select one of them as the “Play Command” in the sound preferences
dialog. When you select <code class="docutils literal notranslate"><span class="pre">alsaaudio</span></code> as the play command, if you have multiple
soundcards, you can select the device to which the sound will be sent.
There will be also an option to set the size of the buffer that
<code class="docutils literal notranslate"><span class="pre">alsaaudio</span></code> uses to play sounds. If the buffer is not filled completely by
a sound (buffer size greater than number of samples in the sound), it
will be zero padded. This may lead to some latency between the offset of
a sound and the onset of the following one. If you set a value smaller
than one the buffer size will be automatically set to the number of
samples in the sound that is being played.</p>
<p>Using an external command to play sounds generally works very well and
is fast on modern hardware. <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> tries to detect available
play commands on your system each time it starts up. On Linux systems,
the recommended play command is <code class="docutils literal notranslate"><span class="pre">aplay</span></code>, which is installed by default
on most Linux distributions. <code class="docutils literal notranslate"><span class="pre">aplay</span></code> supports 24-bit output on 24-bit
soundcards with appropriate Linux drivers. Other possible play commands
are <code class="docutils literal notranslate"><span class="pre">play</span></code>, which is provided by <a class="reference external" href="http://sox.sourceforge.net/">sox</a>
and <code class="docutils literal notranslate"><span class="pre">sndfile-play</span></code>, which is provided by the
<a class="reference external" href="http://www.mega-nerd.com/libsndfile/">libsndfile</a> tools. You can call
another program by choosing “custom” in the “Play Command” drop-down
menu and spelling out the name of the command in the box below.</p>
</section>
<section id="sound-output-on-windows">
<h3>Sound Output on Windows<a class="headerlink" href="#sound-output-on-windows" title="Permalink to this heading"></a></h3>
<p>The command that <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> uses by default on Windows is
<code class="docutils literal notranslate"><span class="pre">winsound</span></code>. This command supports only 16-bit output. <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code>
can also use <code class="docutils literal notranslate"><span class="pre">pyaudio</span></code> to output sound on Windows. <code class="docutils literal notranslate"><span class="pre">pyaudio</span></code> can use several
Windows sound APIs, including MME, ASIO, and WASAPI. The MME API,
is limited to 16-bit output. ASIO and WASAPI
on the other hand, can play sounds with full 24-bit resolution.
Depending on the source of your pyaudio installation (e.g. pip, conda, conda-forge)
the WASAPI and ASIO APIs may or may not be activated.</p>
<p>Other possible play commands on Windows are <code class="docutils literal notranslate"><span class="pre">play</span></code>, which is provided by
<a class="reference external" href="http://sox.sourceforge.net/">sox</a> and <code class="docutils literal notranslate"><span class="pre">sndfile-play</span></code>, which is
provided by the <a class="reference external" href="http://www.mega-nerd.com/libsndfile/">libsndfile</a>
tools. These programs need to be installed by the user. If they are in
the system path, <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> will detect them automatically.
Note that external media players with a graphical user interface (like
foobar2000) may not work well with <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code>.</p>
</section>
<section id="sound-output-on-macos">
<h3>Sound Output on macOS<a class="headerlink" href="#sound-output-on-macos" title="Permalink to this heading"></a></h3>
<p>By default <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> uses the <code class="docutils literal notranslate"><span class="pre">afplay</span></code> command to output sound
on macOS. If <code class="docutils literal notranslate"><span class="pre">pyaudio</span></code> is properly installed and configured for the Python
distribution used to run <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> it can also be used by <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code>
to play sounds on macOS.</p>
</section>
<section id="sound-output-on-freebsd">
<h3>Sound Output on FreeBSD<a class="headerlink" href="#sound-output-on-freebsd" title="Permalink to this heading"></a></h3>
<p>The default command used by <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> to play sound on FreeBSD is <code class="docutils literal notranslate"><span class="pre">wavplay</span></code>.
Several other commands can be used to play sound on FreeBSD systems, see <a class="reference external" href="https://forums.freebsd.org/threads/59793/">here</a>.</p>
</section>
</section>
<section id="parameters-files">
<span id="sec-parameters-files"></span><h2>Parameters Files<a class="headerlink" href="#parameters-files" title="Permalink to this heading"></a></h2>
<p>Parameters files are plain text files, that can be modified through
<code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> or through a text editor. They contain a header
with information that applies to all the experimental blocks stored
in a parameters file, and sections corresponding to the parameters
that are specific to each experimental block store in a parameters
file. The header contains the following fields:</p>
<ul class="simple">
<li><p>Phones</p></li>
<li><p>Shuffle Mode</p></li>
<li><p>Response Mode</p></li>
<li><p>Auto Resp. Mode Perc. Corr.</p></li>
<li><p>Sample Rate</p></li>
<li><p>Bits</p></li>
<li><p>Trigger On/Off</p></li>
<li><p>Experiment Label</p></li>
<li><p>End Command</p></li>
<li><p>Shuffling Scheme</p></li>
<li><p>No. Repetitions</p></li>
<li><p>Proc. Res.</p></li>
<li><p>Proc. Res. Table</p></li>
<li><p>Plot</p></li>
<li><p>PDF Plot</p></li>
</ul>
<p>You can refer to Section <a class="reference internal" href="graphical_user_interface.html#sec-gui-left-panel"><span class="std std-ref">General Widgets (left panel)</span></a> to know what each
of these fields represents.</p>
<p>The sections that contain the parameters for each experimental block are
subdivided into fields that are separated by one or more dots. You
should not change this formatting when modifying parameters files.</p>
<p>A fragment from a parameters file is shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Paradigm</span><span class="p">:</span> <span class="n">Adaptive</span>
<span class="n">Intervals</span><span class="p">:</span> <span class="mi">2</span> <span class="p">:</span><span class="kc">False</span>
<span class="n">Alternatives</span><span class="p">:</span> <span class="mi">2</span> <span class="p">:</span><span class="kc">False</span>
</pre></div>
</div>
<p>each entry here has two or three elements separated by colons. The first
element represents the variable of interest, the second element its
value, and the third element is a boolean value that determines whether
the <code class="docutils literal notranslate"><span class="pre">inSummary</span></code> checkbox will be checked or not (see
Section <a class="reference internal" href="result_files.html#sec-results-files"><span class="std std-ref">Result Files</span></a> for more info on this).
You can have one or more spaces between each element and the colon
separator. Each entry has to be written on a single line.</p>
</section>
<section id="block-presentation-position">
<span id="sec-shuffling"></span><h2>Block Presentation Position<a class="headerlink" href="#block-presentation-position" title="Permalink to this heading"></a></h2>
<p>We will define the serial position at which a block is presented during
an experimental session as its “presentation position”, and the serial
position at which a block is stored in a parameters file as its “storage
point”.</p>
<p>Clicking the “Shuffle” button randomises the presentation positions of
the blocks, but leaves the order in which the blocks are stored in a
parameters file untouched. The “Previous” and “Next” buttons, as well as
the “Jump to Block” chooser let you navigate across the blocks storage
points, while the “Previous Position”, and the “Next Position” buttons,
as well as the “Jump to Position” chooser let you navigate across the
blocks presentation positions.</p>
<p>The block presentation positions are recorded in the parameters files.
This is useful in case you have to interrupt an experimental session
whose block presentation positions had been randomized, before it is
finished, and continue it at a later date. In this case you can save the
parameters file, reload it next time, and let the listener complete the
experimental blocks that s/he had not run because of the interruption.
Notice that each time you load a parameters file <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> will
automatically move to the first block presentation position. Therefore,
you will have to note down what was the last block that your listener
had run in the interrupted session (or find out by looking at the
results file) and move to the presentation position of the following
block yourself.</p>
<p>By default clicking on the “Shuffle” button performs a simple full
randomization of the block presentation positions. However, you can
specify more complex shuffling schemes in the “Shuffling Scheme” text
field. Let’s say you want to present two tasks in your experiment, a
frequency discrimination and an intensity discrimination task. Each task
has four subconditions, (e.g. four different base frequencies for the
frequency discrimination task and four different base intensities for
the intensity discrimination task). Your parameters file will contain
eight blocks in total, blocks one to four are for the frequency
discrimination task and blocks five to eight are for the intensity
discrimination task. During the experiment you want your participants to
run first the four frequency discrimination conditions in random order,
and afterwards the four intensity discrimination conditions in random
order. To achieve this you can enter the following shuffling scheme:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
</pre></div>
</div>
<p>basically you specify sequences (which can be nested) with your
experimental blocks, sequences within round parentheses <code class="docutils literal notranslate"><span class="pre">()</span></code> are not
shuffled, while sequences within square brackets <code class="docutils literal notranslate"><span class="pre">[]</span></code> are shuffled.
Following the previous example, if you want to present first the four
blocks of one of the tasks (either frequency or intensity) in random
order, and then the four blocks of the other task in random order, you
would specify your shuffling scheme as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]]</span>
</pre></div>
</div>
<p>on the other hand, if you want to present first the four blocks of one
of the tasks (either frequency or intensity) in sequential order and
then the four blocks of the other task in sequential order, you would
specify your shuffling scheme as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">)]</span>
</pre></div>
</div>
<p>you can have any variation you like on the theme, and the lists can be
nested ad libitum, so for example you could have:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">)]</span>
</pre></div>
</div>
<p>this would instruct <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> to present first either the four
frequency conditions or the four intensity conditions. The first two
frequency conditions are presented sequentially, while the last two are
shuffled. To save typing you can give ranges rather than listing all
blocks individually. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">([</span><span class="mi">1</span><span class="o">-</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="o">-</span><span class="mi">8</span><span class="p">])</span>
</pre></div>
</div>
<p>is equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="displaying-task-instructions">
<span id="sec-task-instructions"></span><h2>Displaying Task Instructions<a class="headerlink" href="#displaying-task-instructions" title="Permalink to this heading"></a></h2>
<p>Although it is common to simply give task instructions verbally for
psychophysics experiments, sometimes it is useful to present task
instructions on the computer screen while the listener is running a test.
For example, there may be cases in which you want to your participants to perform two
different tasks within the same session. You may want your
participants to perform a frequency discrimination task with a pure
tone for the first two blocks of trials, and then run two blocks of
an intensity discrimination task with the same stimulus. In these
cases it is necessary to present visually the task instructions on the
computer screen either at the beginning of each block, or only at the
blocks where the task changes. <cite>pychoacoustics</cite> allows you to store
task instructions for each block of trials in the “Instructions” box
on the left side of the control window. The “Show Instructions At BP”
box below allows you to set the block positions at which the
instructions will be shown. In the example above, in which the
listener has to complete two blocks of the frequency discrimination
task first, and then complete two blocks of the intensity
discrimination task, you could input`1,2,3,4` in the “Show
Instructions At BP” box to show task instructions at the beginning of
each block. Alternatively, you could input`1,3` in the “Show
Instructions At BP” box to show task instructions only when a new task
is starting. You should keep in mind that the “Show
Instructions At BP” box sets the block positions at which the
instructions will be shown. Depending on the shuffling scheme that
you’re using these may be different from the block storage points (see
<a class="reference internal" href="#sec-shuffling"><span class="std std-ref">Block Presentation Position</span></a> above for more info).</p>
</section>
<section id="os-commands">
<span id="sec-os-commands"></span><h2>OS Commands<a class="headerlink" href="#os-commands" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> can be instructed to run operating system (OS)
commands at the end of an experiment. This may be useful to run custom
scripts that may analyse the result files, backup result files or
perform other operations.</p>
<p>In the control window, you can enter commands that you want to be
executed at the end of a specific experiment in the “End Command” box.
This command will be saved in the parameters file of the experiment.</p>
<p>In the “Preferences Dialog”, under the “Notifications” tab you can
instead set a command that will be executed at the end of each
experiment you run, or <span class="math notranslate nohighlight">\(n\)</span> blocks before the end of each
experiment you run. These commands should be entered in the “Execute
custom command” boxes.</p>
<p>The commands that you can execute are OS commands, therefore they are
different on Linux and Windows platforms. On Linux, for example,
assuming that you store all your experimental results in the directory
“/home/foo/exp/”, you could automatically make a backup of these files
in the directory “/home/foo/backup/exp/” by using the command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>rsync<span class="w"> </span>-r<span class="w"> </span>-t<span class="w"> </span>-v<span class="w"> </span>--progress<span class="w"> </span>-s<span class="w"> </span>/home/foo/exp/<span class="w"> </span>/home/foo/backup/exp/
</pre></div>
</div>
<p>To make things more interesting, you can use some special strings to
pass <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> internal variables to your commands. For
example, if you want to copy the results file of the current experiment
to the directory “/home/foo/res/”, you can use the command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cp<span class="w"> </span><span class="o">[</span>resFile<span class="o">]</span><span class="w"> </span>/home/foo/backup/exp/
</pre></div>
</div>
<p>here the special string <code class="docutils literal notranslate"><span class="pre">[resFile]</span></code> will be converted to the name of
the file where <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> has saved the data. To make sure that
the command executes without errors even if the name of the result file
contains white spaces you should put the variable referring
to the filename between quotes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cp<span class="w"> </span><span class="s2">&quot;[resFile]&quot;</span><span class="w"> </span>/home/foo/backup/exp/
</pre></div>
</div>
<p>A full listing of the internal <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> variables that
can be called by special strings in your commands is given in
Table <a class="reference internal" href="#tab-pycho-variables"><span class="std std-ref">pychoacoustics variables</span></a></p>
<span id="tab-pycho-variables"></span><table class="docutils align-default" id="id3">
<caption><span class="caption-text"><cite>pychoacoustics</cite> variables</span><a class="headerlink" href="#id3" title="Permalink to this table"></a></caption>
<tbody>
<tr class="row-odd"><td><p><strong>String</strong></p></td>
<td><p><strong>Variable</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[resDir]</span></code></p></td>
<td><p>Results file directory</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[resFile]</span></code></p></td>
<td><p>Plain-text block-summary results file</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[resFileTrial]</span></code></p></td>
<td><p>Plain-text trial-summary results file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[resFileSess]</span></code></p></td>
<td><p>Plain-text session-summary results file</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[resTable]</span></code></p></td>
<td><p>Tabular block-summary results file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[resTableTrials]</span></code></p></td>
<td><p>Tabular trial-summary results file</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[resTableSess]</span></code></p></td>
<td><p>Tabular session-summary results file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[listener]</span></code></p></td>
<td><p>Listener label</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[experimenter]</span></code></p></td>
<td><p>Experimenter ID</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[pdfPlot]</span></code></p></td>
<td><p>pdf plot file of the session summary</p></td>
</tr>
</tbody>
</table>
</section>
<section id="preferences-settings">
<h2>Preferences Settings<a class="headerlink" href="#preferences-settings" title="Permalink to this heading"></a></h2>
<p>All the settings that can be manipulated in the
“Preferences” dialog, as well as the “Phones” and “Experimenters”
dialogs are stored in a file in the user home directory. On Linux this
file is located in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/.</span><span class="n">config</span><span class="o">/</span><span class="n">pychoacoustics</span><span class="o">/</span><span class="n">preferences</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>On Windows, assuming the root drive is “C” it is located in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\\<span class="n">Users</span>\<span class="n">username</span>\<span class="o">.</span><span class="n">config</span><span class="o">/</span><span class="n">pychoacoustics</span>\<span class="n">preferences</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">username</span></code> is your Windows login username. Although I strive to
avoid this, the way in which the preferences settings are stored may
change in newer versions of pychoacoustics. This means that when
pychoacoustics is upgraded to a newer version it may sometimes not start
or throw out errors. To address these issues, please, try removing the
old preferences file. Of course this means that you’re going to lose all
the settings that you had previously saved. To avoid loosing any
precious information, such as the calibration values of your headphones,
write down all important info before removing the preferences file.</p>
</section>
<section id="response-mode">
<span id="sec-response-mode"></span><h2>Response Mode<a class="headerlink" href="#response-mode" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> was designed to run interactive experiments in which
a listener hears some stimuli and gives a response through a button or
key press. This is the default mode, called “Real Listener” mode.
<code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> provides two additional response modes, “Automatic”
and “Simulated Listener”. These modes can be set through the control
window.</p>
<p>In “Automatic” response mode, rather than waiting for the listener to
give a response, <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> gives itself a response and proceeds
to the next trial. The probability that this automatic response is
correct can also be set through the control window. The “Automatic”
response mode has two main functions. The first is testing and debugging
an experiment. Rather than running the experiment yourself, you can
launch <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> in “Automatic” response mode and check that
everything runs smoothly, the program doesn’t crash, and the result
files are saved correctly. The second function of the automatic response
mode is to allow passive presentation of the stimuli. Some neuroimaging
experiments (e.g. electroencephalographic or functional magnetic
resonance recordings) are performed with listeners passively listening
to the stimuli. These experiments usually also require that the program
presenting the stimuli sends triggers to the recording equipment to flag
the start of a trial. Potentially this can also be done in
<code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> (and we’ve done it in our lab for
electroencephalographic recordings), but at the moment this
functionality is not implemented in a general way in the program.</p>
<p>The “Simulated Listener” mode is simply a hook that allows you to
redirect the control flow of the program to some code that simulates a
listener and provides a response. Notice that <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> does
not provide any simulation code in itself, the simulation code has to be
written by you for a specific experiment. If no simulation code is
written in the experiment file, <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> will do nothing in
simulated listenr mode. Further details on how to use the “Simulated
Listener” mode are provided in Section <a class="reference internal" href="adding_experiments.html#sec-simulations"><span class="std std-ref">Simulations</span></a>.</p>
<p>Both the “Automatic” and the “Simulated Listener” make recursive
function calls. In Python the number of recursive function calls that
you can make is limited. If your experiment passes this limit
<code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> will crash. The limit can be raised, up to a certain
extent (which is dependent on your operating system, see the
documentation for the setrecursionlimit function in the Python <code class="docutils literal notranslate"><span class="pre">sys</span></code>
module) through the “Max Recursion Depth” setting that you can find in
the preferences window, or set through a command line option when
running <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> from the command line. Notice that the total
number of recursive calls that your program will make to complete an
experiments will be higher than the number of trials in the experiment,
so you should set the “Max Recursion Depth” to a value higher than the
number of trials you’re planning to perform (how much higher I don’t
know, you should find out by trial and error, a few hundred points
higher is usually sufficient). If you’re planning to run a very high
number of trials in “Automatic” or “Simulated Listener” mode, rather
than raising the max recursion depth, it may be better to split the
experiment in several parts. You can always write a script that
automatically launches <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> from the command line
instructing it to load a given parameters file. On UNIX machines you
could write a shell script to do that, but an easier way is perhaphs to
use python itself to write the script. For example, the <code class="docutils literal notranslate"><span class="pre">python</span></code>
script could be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /usr/bin/env python</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
   <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;pychoacoustics --file prms.prm -l L1 -s s1 -q -a </span><span class="se">\</span>
<span class="s2">         --recursion-depth 3000&quot;</span>
</pre></div>
</div>
<p>here we’re telling <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> to load the parameters file
<code class="docutils literal notranslate"><span class="pre">prms.prm</span></code>, set the listener identifier to “L1” and the session label
to s1. The <code class="docutils literal notranslate"><span class="pre">-q</span></code> option instructs the program to exit at the end of the
experiment. This way the recursion depth count is effectively restarted
each time <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> is closed and launched again from the
script. When the <code class="docutils literal notranslate"><span class="pre">--recursion-depth</span></code> option is passed as a command
line argument, as in the example above, it overrides the max recursion
depth value set in the preferences window. If the <code class="docutils literal notranslate"><span class="pre">-a</span></code> option is
passed, as in the examples above, <code class="docutils literal notranslate"><span class="pre">pychoacoustics</span></code> will start
automatically at the beginning of each of the five series . This is
useful for debugging or simulations, so that you can start the script
and leave the program complete unattended (you need to make sure that
the “Shuffling Mode” is not set to “Ask” and that you pass listener and
session labels if you want the program to run completely unattended).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="default_experiments.html" class="btn btn-neutral float-left" title="Default Experiments" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="adding_experiments.html" class="btn btn-neutral float-right" title="Writing your own Experiments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2008-2024, Samuele Carcagno.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>