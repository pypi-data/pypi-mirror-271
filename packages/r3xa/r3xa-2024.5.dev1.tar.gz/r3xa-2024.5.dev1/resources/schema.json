{
    "type": "object",
    "title": "R3XA: Remember, Reuse and Replicate eXperiments and Analyses",
    "description": "This is the specs for the R3XA experiments and analysis meta data template.",
    "properties": {
        "title": {
            "title": "Title",
            "description": "The title of the data sets",
            "type": "string",
            "example": [
                "DICComposite2.0",
                "My awesome data sets"
            ]
        },
        "description": {
            "title": "Description",
            "description": "The description of the data sets",
            "type": "string"
        },
        "version": {
            "title": "Version",
            "description": "Version of the schema used",
            "type": "string",
            "const": "2024.5.dev1"
        },
        "authors": {
            "title": "Author",
            "description": "Authors of the data sets",
            "type": "string",
            "examples": [
                "M. Palin, J. Cleese",
                "ORCID",
                "HAL-ID"
            ]
        },
        "date": {
            "title": "Date",
            "description": "Global date of the experiment (YYYY-MM-DD)",
            "type": "string",
            "pattern": "^[1-2]{1}[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$",
            "examples": [
                "2020-03-17"
            ]
        },
        "repository": {
            "title": "Repository",
            "description": "URL to the repository where the data sets are stored",
            "type": "string",
            "examples": [
                "https://zenodo.org/records/42"
            ]
        },
        "documentation": {
            "title": "Documentation",
            "description": "URI to the documentation (pdf)",
            "type": "string",
            "examples": [
                "./doc/my_doc.pdf",
                "https://zenodo.org/records/42/doc/my_doc.pdf"
            ]
        },
        "license": {
            "title": "License",
            "description": "License of the data sets",
            "type": "string",
            "examples": [
                "Creative common"
            ]
        },
        "settings": {
            "title": "Settings",
            "description": "List of parameters, devices or software that don't explicitly interact with the data sets",
            "type": "array",
            "items": {
                "anyOf": [
                    {
                        "$ref": "#/$defs/settings/generic"
                    },
                    {
                        "$ref": "#/$defs/settings/specimen"
                    }
                ]
            }
        },
        "data_sources": {
            "title": "Data sources",
            "description": "The sources of the data (sensor or analysis)",
            "type": "array",
            "items": {
                "anyOf": [
                    {
                        "$ref": "#/$defs/data_sources/generic"
                    },
                    {
                        "$ref": "#/$defs/data_sources/camera"
                    }
                ]
            }
        },
        "data_sets": {
            "title": "Data sets",
            "description": "The data sets :)",
            "type": "array",
            "items": {
                "anyOf": [
                    {
                        "$ref": "#/$defs/data_sets/file"
                    },
                    {
                        "$ref": "#/$defs/data_sets/list"
                    }
                ]
            }
        }
    },
    "required": [
        "title",
        "description",
        "version",
        "authors",
        "date"
    ],
    "additionalProperties": false,
    "$defs": {
        "settings": {
            "generic": {
                "title": "Generic setting",
                "description": "Experimental parameters should be the specimen, patterning technique and machines used (light, testing rig, environmental chamber...). Describe the experimental techniques/apparatus and devices used / light / environment chamber ...",
                "type": "object",
                "properties": {
                    "id": {
                        "title": "ID",
                        "description": "ID of the setting",
                        "type": "string"
                    },
                    "kind": {
                        "title": "Kind of object",
                        "description": "Only required for specs implementation purposes",
                        "type": "string",
                        "const": "settings/generic"
                    },
                    "title": {
                        "title": "Title",
                        "description": "The title of setting",
                        "type": "string"
                    },
                    "description": {
                        "title": "Description",
                        "description": "The description of your setting",
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "kind",
                    "title",
                    "description"
                ],
                "additionalProperties": false
            },
            "specimen": {
                "title": "Specimen",
                "description": "A specimen.",
                "type": "object",
                "properties": {
                    "id": {
                        "title": "ID",
                        "description": "ID of the setting",
                        "type": "string"
                    },
                    "kind": {
                        "title": "Kind of object",
                        "description": "Only required for specs implementation purposes",
                        "type": "string",
                        "const": "settings/specimen"
                    },
                    "title": {
                        "title": "Title",
                        "description": "The title of setting",
                        "type": "string"
                    },
                    "description": {
                        "title": "Description",
                        "description": "The description of your setting",
                        "type": "string"
                    },
                    "cad": {
                        "title": "CAD",
                        "description": "Path to the design of the specimen",
                        "type": "string",
                        "examples": [
                            "my-specimen.vtk"
                        ]
                    },
                    "sizes": {
                        "title": "Sizes",
                        "description": "The sizes of the specimen",
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/types/unit"
                        }
                    },
                    "patterning_technique": {
                        "title": "Patterning technique",
                        "description": "The patterning technique used on the specimen",
                        "type": "string",
                        "examples": [
                            "Base coat of white spray paint with ink stamped speckles"
                        ]
                    },
                    "patterning_feature_size": {
                        "title": "Patterning feature size",
                        "description": "The characteristic size of the pattern",
                        "$ref": "#/$defs/types/unit"
                    }
                },
                "required": [
                    "id",
                    "kind",
                    "title",
                    "description",
                    "sizes"
                ],
                "additionalProperties": false
            }
        },
        "data_sources": {
            "generic": {
                "title": "Generic data source",
                "description": "A data source is a procedure or a system that generates a data set. If it is a sensor then his parameters must be specified. If it is an analysis specifies his parameters are specified along with the input parameters. It also indicates the dimension, the number of components and the unit of the output data.",
                "type": "object",
                "properties": {
                    "id": {
                        "title": "ID",
                        "description": "ID of the data source",
                        "type": "string"
                    },
                    "kind": {
                        "title": "Kind of data source",
                        "description": "Only required for specs implementation purposes",
                        "type": "string",
                        "const": "data_sources/generic"
                    },
                    "title": {
                        "title": "Title",
                        "description": "The title of your data source",
                        "type": "string"
                    },
                    "description": {
                        "title": "Description",
                        "description": "The description of your data source",
                        "type": "string"
                    },
                    "input_data_sets": {
                        "title": "List of the data sets",
                        "description": "The data sets IDs serving as an input to the source",
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/types/data_set_id"
                        }
                    },
                    "output_components": {
                        "title": "Output components",
                        "description": "Number of componants / channels of the ouput data",
                        "$ref": "#/$defs/types/uint"
                    },
                    "output_dimension": {
                        "title": "Output dimension",
                        "description": "Dimension of the output data",
                        "type": "string",
                        "enum": [
                            "point",
                            "curve",
                            "surface",
                            "volume"
                        ]
                    },
                    "output_units": {
                        "title": "Output units",
                        "description": "Unit of the output data",
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/types/unit"
                        }
                    },
                    "manufacturer": {
                        "title": "Manufacturer",
                        "description": "Manufacturer / vendor / software editor",
                        "type": "string"
                    },
                    "model": {
                        "title": "Model",
                        "description": "model or software version",
                        "type": "string"
                    },
                    "documentation": {
                        "title": "Documentation",
                        "description": "Name, path or ULR of the documentation (no spaces, no accents)",
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "kind",
                    "title",
                    "description",
                    "output_components",
                    "output_dimension",
                    "output_units",
                    "manufacturer",
                    "model"
                ],
                "additionalProperties": false
            },
            "camera": {
                "title": "Camera",
                "description": "A generic camera (visible).",
                "type": "object",
                "properties": {
                    "id": {
                        "title": "ID",
                        "description": "ID of the data source",
                        "type": "string"
                    },
                    "kind": {
                        "title": "Kind of data source",
                        "description": "Only required for specs implementation purposes",
                        "type": "string",
                        "const": "data_sources/generic"
                    },
                    "title": {
                        "title": "Title",
                        "description": "The title of your data source",
                        "type": "string"
                    },
                    "description": {
                        "title": "Description",
                        "description": "The description of your data source",
                        "type": "string"
                    },
                    "input_data_sets": {
                        "title": "List of the data sets",
                        "description": "The data sets IDs serving as an input to the source",
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/types/data_set_id"
                        }
                    },
                    "output_components": {
                        "title": "Output components",
                        "description": "Number of componants / channels of the ouput data",
                        "$ref": "#/$defs/types/uint"
                    },
                    "output_dimension": {
                        "title": "Output dimension",
                        "description": "Dimension of the output data",
                        "type": "string",
                        "enum": [
                            "point",
                            "curve",
                            "surface",
                            "volume"
                        ]
                    },
                    "output_units": {
                        "title": "Output units",
                        "description": "Unit of the output data",
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/types/unit"
                        }
                    },
                    "manufacturer": {
                        "title": "Manufacturer",
                        "description": "Manufacturer / vendor / software editor",
                        "type": "string"
                    },
                    "model": {
                        "title": "Model",
                        "description": "model or software version",
                        "type": "string"
                    },
                    "documentation": {
                        "title": "Documentation",
                        "description": "Name, path or ULR of the documentation (no spaces, no accents)",
                        "type": "string"
                    },
                    "image_size": {
                        "title": "Image size",
                        "description": "Size of the image in pix times pix",
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/types/unit"
                        }
                    },
                    "field_of_view": {
                        "title": "Field of view",
                        "description": "Size of the field of view in m times m",
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/types/unit"
                        }
                    },
                    "image_scale": {
                        "title": "Image scale",
                        "description": "Scale of the image in pix / m",
                        "$ref": "#/$defs/types/unit"
                    },
                    "focal_length": {
                        "title": "Focal length",
                        "description": "Focal length of the lens in mm",
                        "$ref": "#/$defs/types/unit"
                    },
                    "lens": {
                        "title": "Camera lens",
                        "description": "Camera lens manufacturer and model",
                        "type": "string"
                    },
                    "filter": {
                        "title": "Camera or lens filter",
                        "description": "Filter type, manufacturer and model",
                        "type": "string"
                    },
                    "aperture": {
                        "title": "Aperture of the lens",
                        "description": "Aperture value",
                        "type": "string",
                        "examples": "f/8"
                    },
                    "exposure": {
                        "title": "Exposure time",
                        "description": "Exposure time in ms",
                        "$ref": "#/$defs/types/unit"
                    },
                    "standoff_distance": {
                        "title": "Standoff distance",
                        "description": "Standoff distance between the camera and the sample, in m",
                        "$ref": "#/$defs/types/unit"
                    },
                    "noise": {
                        "title": "Noise level",
                        "description": "Quantity of noise of the camera",
                        "$ref": "#/$defs/types/unit"
                    }
                },
                "required": [
                    "id",
                    "kind",
                    "title",
                    "description",
                    "output_components",
                    "output_dimension",
                    "output_units",
                    "manufacturer",
                    "model",
                    "image_size"
                ],
                "additionalProperties": false
            }
        },
        "data_sets": {
            "file": {
                "title": "Data set (file)",
                "description": "When all the data is stored in a single table like file (csv, txt)",
                "type": "object",
                "properties": {
                    "id": {
                        "title": "ID",
                        "description": "ID of the data set",
                        "type": "string"
                    },
                    "kind": {
                        "title": "Kind of data source",
                        "description": "Only required for specs implementation purposes",
                        "type": "string",
                        "const": "data_sets/file"
                    },
                    "title": {
                        "title": "Title",
                        "description": "The title of the data set",
                        "type": "string"
                    },
                    "description": {
                        "title": "Description",
                        "description": "The description of the data set",
                        "type": "string"
                    },
                    "path": {
                        "title": "Path",
                        "type": "string",
                        "description": "relative path to the data folder",
                        "examples": [
                            "..",
                            "my_folder"
                        ]
                    },
                    "data_sources": {
                        "title": "Data sources",
                        "description": "List if IDs of the data sources",
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/types/data_source_id"
                        }
                    },
                    "file_type": {
                        "title": "Fiel type",
                        "description": "MIME of the file",
                        "type": "string",
                        "examples": [
                            "text/csv"
                        ]
                    },
                    "time_reference": {
                        "title": "Time reference",
                        "description": "The reference time",
                        "type": "number"
                    },
                    "keywords": {
                        "title": "Keywords",
                        "description": "A list of keywords",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "timestamps": {
                        "title": "Timesamps",
                        "description": "Path and range to the timestamps file",
                        "$ref": "#/$defs/types/data_set_file"
                    },
                    "data": {
                        "title": "Data",
                        "description": "Path and range to the data file",
                        "$ref": "#/$defs/types/data_set_file"
                    }
                },
                "required": [
                    "id",
                    "kind",
                    "title",
                    "description",
                    "data_sources",
                    "file_type",
                    "time_reference",
                    "timestamps",
                    "data"
                ],
                "additionalProperties": false
            },
            "list": {
                "title": "Data set (list)",
                "description": "When all the data is stored in separated files (like a list of images)",
                "type": "object",
                "properties": {
                    "id": {
                        "title": "ID",
                        "description": "ID of the data set",
                        "type": "string"
                    },
                    "kind": {
                        "title": "Kind of data source",
                        "description": "Only required for specs implementation purposes",
                        "type": "string",
                        "const": "data_sets/list"
                    },
                    "title": {
                        "title": "Title",
                        "description": "The title of the data set",
                        "type": "string"
                    },
                    "description": {
                        "title": "Description",
                        "description": "The description of the data set",
                        "type": "string"
                    },
                    "path": {
                        "title": "Path",
                        "type": "string",
                        "description": "relative path to the data folder",
                        "examples": [
                            "..",
                            "my_folder"
                        ]
                    },
                    "data_sources": {
                        "title": "Data sources",
                        "description": "List if IDs of the data sources",
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/types/data_source_id"
                        }
                    },
                    "time_reference": {
                        "title": "Time reference",
                        "description": "The reference time",
                        "type": "number"
                    },
                    "keywords": {
                        "title": "Keywords",
                        "description": "A list of keywords",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "timestamps": {
                        "title": "Timesamps",
                        "description": "List of the timestamps",
                        "type": "array",
                        "items": {
                            "type": "number"
                        }
                    },
                    "data": {
                        "title": "Data",
                        "description": "List of the data files",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "id",
                    "kind",
                    "title",
                    "description",
                    "data_sources",
                    "time_reference",
                    "timestamps",
                    "data"
                ],
                "additionalProperties": false
            }
        },
        "types": {
            "setting_id": {
                "description": "The ID of a setting",
                "type": "string"
            },
            "data_set_id": {
                "description": "The ID of a data set",
                "type": "string"
            },
            "data_source_id": {
                "description": "The ID of a data source",
                "type": "string"
            },
            "data_set_file": {
                "type": "object",
                "properties": {
                    "filename": {
                        "type": "string"
                    },
                    "delimiter": {
                        "type": "string",
                        "default": ";",
                        "examples": [
                            ";",
                            ",",
                            ":",
                            "\t"
                        ]
                    },
                    "data_range": {
                        "type": "string",
                        "examples": [
                            "B42:B421"
                        ]
                    },
                    "kind": {
                        "title": "Kind of object",
                        "description": "Only required for specs implementation purposes",
                        "type": "string",
                        "const": "data_set_file"
                    }
                },
                "required": [
                    "filename",
                    "kind"
                ],
                "examples": [
                    {
                        "filename": "results.csv",
                        "delimiter": ":",
                        "range": "B52:B421"
                    }
                ]
            },
            "unit": {
                "type": "object",
                "properties": {
                    "title": {
                        "title": "Title",
                        "description": "The title of the unit",
                        "type": "string",
                        "examples": [
                            "length",
                            "width",
                            "speed"
                        ]
                    },
                    "value": {
                        "title": "Value",
                        "description": "A numerical value",
                        "type": "number"
                    },
                    "unit": {
                        "title": "Unit",
                        "description": "The unit",
                        "type": "string",
                        "examples": [
                            "m",
                            "kN",
                            "kg",
                            "m/s"
                        ]
                    },
                    "scale": {
                        "title": "Scale",
                        "description": "Factor with respect to the standard system",
                        "type": "number"
                    },
                    "kind": {
                        "title": "Kind of object",
                        "description": "Only required for specs implementation purposes",
                        "type": "string",
                        "const": "unit"
                    }
                },
                "required": [
                    "kind",
                    "unit"
                ]
            },
            "uint": {
                "title": "uint",
                "description": "Unsigned int",
                "type": "integer",
                "minimum": 0
            }
        }
    }
}
