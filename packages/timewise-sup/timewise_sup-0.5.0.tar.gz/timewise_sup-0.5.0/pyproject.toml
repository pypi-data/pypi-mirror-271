# ---------------------------------------------------
# START poetry config

[tool.poetry]
name = "timewise-sup"
version = "0.5.0"
description = "The Timewise Subtraction Pipeline produces mid-infrared difference photometry based on measurements by the WISE satelite"
authors = ["Jannis Necker <jannis.necker@gmail.com>", "Eleni Graikou <eleni.graikou@desy.de>"]
license = "BSD-3-Clause"
readme = "README.md"
documentation = "https://jannisnecker.pages.desy.de/timewise_sup/docs/"
repository = "https://gitlab.desy.de/jannisnecker/timewise_sup"

[tool.poetry.scripts]
timewise_sup = "timewise_sup.main:main"
timewise_sup_bump = "timewise_sup.main:bump_version"

[tool.poetry.dependencies]
python = ">=3.10, <3.11"
timewise = "0.4.10"
extcats = "^2.4.3"
more-itertools = "^9.0.0"
nltk = "^3.7"
uncertainties = "^3.1.7"
scikit-learn = "^1.1.2"
corner = "^2.2.1"
ampel-core = "0.8.4"
ampel-hu-astro = {version="0.8.3a20", extras=["ztf"]}
tkpdfviewer = "^0.1"
matplotlib-venn = "^0.11.9"
jupyterlab = {version="^4.0.0", optional=true}

[tool.poetry.group.dev]
optional = true

[tool.poetry.group.dev.dependencies]
coveralls = "^3.3.1"
pytest = "^7.2.1"
coverage-badge = "^1.1.0"
types-requests = "^2.31.0.2"
types-pyyaml = "^6.0.12.11"
types-pytz = "^2023.3.0.1"
mypy = "<1.2"
pylint = "^2.17.5"
pylint-gitlab = "^1.2.0"
anybadge = "^1.14.0"

[tool.poetry.group.docs]
optional = true

[tool.poetry.group.docs.dependencies]
sphinx = {version = "^7.1.2"}
sphinx-rtd-theme = "^1.3.0"

[tool.poetry.extras]
fpbot = ["fpbot"]
jupyter = ["jupyterlab"]

[tool.setuptools.package-data]
timewise_sup = "*.csv"

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

# END poetry config
# ---------------------------------------------------

[tool.coverage.run]
parallel = true

# ---------------------------------------------------
# START mypy config

[tool.mypy]
exclude = [
    'timewise_sup/sky_match\.py$',
    'timewise_sup/plots/visual_classification_plots\.py$',
    'timewise_sup/analyse_lightcurves/visual_classification\.py$',
    'timewise_sup/plots/overlap_with_ztf\.py$'
]

[[tool.mypy.overrides]]
module = [
    "pandas.*",
    "timewise.*",
    "matplotlib.*",
    "matplotlib_venn",
    "mpl_toolkits.*",
    "corner.*",
    "astropy.*",
    "scipy.*",
    "seaborn.*",
    "tqdm.*",
    "k3match.*",
    "fpbot.*"
]
ignore_missing_imports = true

# END mypy config
# ---------------------------------------------------

# ---------------------------------------------------
# START pylint config

[tool.pylint.main]
fail-under = 8.0
ignore-paths = [
    'virtualenvs.\*',
    '.cache.\*',
    'timewise_sup.sky_match',
    'timewise_sup.plots.visual_classification_plots.py',
    'timewise_sup.analyse_lightcurves.visual_classification.py',
    'timewise_sup.plots.overlap_with_ztf.py'
]

[tool.pylint.logging]
# The type of string formatting that logging methods do. `old` means using %
# formatting, `new` is for `{}` formatting.
logging-format-style = "new"

[tool.pylint.messages_control]
disable = "logging-fstring-interpolation,C0103"

[tool.pylint.typecheck]
# List of module names for which member attributes should not be checked
generated-members = "json"

# END pylint config
# ---------------------------------------------------
